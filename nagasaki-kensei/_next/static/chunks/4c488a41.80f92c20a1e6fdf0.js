(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[608],{53180:function(e){e.exports=function(){"use strict";var e=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;++n)e[r[n]]=t[r[n]];return e},t=0;function r(e,r){this.id=t++,this.type=e,this.data=r}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}var i=function(e,t){return new r(e,"["+(function e(t){if(0===t.length)return[];var r=t.charAt(0),i=t.charAt(t.length-1);if(t.length>1&&r===i&&('"'===r||"'"===r))return['"'+n(t.substr(1,t.length-2))+'"'];var a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(a)return e(t.substr(0,a.index)).concat(e(a[1])).concat(e(t.substr(a.index+a[0].length)));var f=t.split(".");if(1===f.length)return['"'+n(t)+'"'];for(var o=[],u=0;u<f.length;++u)o=o.concat(e(f[u]));return o})(t+"").join("][")+"]")},a=function(e){return"function"==typeof e&&!e._reglType||e instanceof r},f=function e(t,n){return"function"==typeof t?new r(0,t):"number"==typeof t||"boolean"==typeof t?new r(5,t):Array.isArray(t)?new r(6,t.map(function(t,r){return e(t,n+"["+r+"]")})):t instanceof r?t:void 0},o={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},u="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function s(e){return"string"==typeof e?e.split():e}function c(e){return"string"==typeof e?document.querySelector(e):e}function l(e,t){for(var r=Array(e),n=0;n<e;++n)r[n]=t(n);return r}function d(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,(t|=r)|e>>1}function p(){var e=l(8,function(){return[]});function t(t){var r=function(e){for(var t=16;t<=0x10000000;t*=16)if(e<=t)return t;return 0}(t),n=e[d(r)>>2];return n.length>0?n.pop():new ArrayBuffer(r)}function r(t){e[d(t.byteLength)>>2].push(t)}return{alloc:t,free:r,allocType:function(e,r){var n=null;switch(e){case 5120:n=new Int8Array(t(r),0,r);break;case 5121:n=new Uint8Array(t(r),0,r);break;case 5122:n=new Int16Array(t(2*r),0,r);break;case 5123:n=new Uint16Array(t(2*r),0,r);break;case 5124:n=new Int32Array(t(4*r),0,r);break;case 5125:n=new Uint32Array(t(4*r),0,r);break;case 5126:n=new Float32Array(t(4*r),0,r);break;default:return null}return n.length!==r?n.subarray(0,r):n},freeType:function(e){r(e.buffer)}}}var h=p();h.zero=p();var m=function(e,t){var r=1;t.ext_texture_filter_anisotropic&&(r=e.getParameter(34047));var n=1,i=1;t.webgl_draw_buffers&&(n=e.getParameter(34852),i=e.getParameter(36063));var a=!!t.oes_texture_float;if(a){var f=e.createTexture();e.bindTexture(3553,f),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var o=e.createFramebuffer();if(e.bindFramebuffer(36160,o),e.framebufferTexture2D(36160,36064,3553,f,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))a=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var u=h.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,u),e.getError()?a=!1:(e.deleteFramebuffer(o),e.deleteTexture(f),a=1===u[0]),h.freeType(u)}}var s="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),c=!0;if(!s){var l=e.createTexture(),d=h.allocType(5121,36);e.activeTexture(33984),e.bindTexture(34067,l),e.texImage2D(34069,0,6408,3,3,0,6408,5121,d),h.freeType(d),e.bindTexture(34067,null),e.deleteTexture(l),c=!e.getError()}return{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:a,npotTextureCube:c}},b=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray};function v(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||b(e.data))}var g=function(e){return Object.keys(e).map(function(t){return e[t]})},y=function(e){for(var t=[],r=e;r.length;r=r[0])t.push(r.length);return t},x=function(e,t,r,n){var i=1;if(t.length)for(var a=0;a<t.length;++a)i*=t[a];else i=0;var f=n||h.allocType(r,i);switch(t.length){case 0:break;case 1:for(var o=t[0],u=0;u<o;++u)f[u]=e[u];break;case 2:!function(e,t,r,n){for(var i=0,a=0;a<t;++a)for(var f=e[a],o=0;o<r;++o)n[i++]=f[o]}(e,t[0],t[1],f);break;case 3:w(e,t[0],t[1],t[2],f,0);break;default:!function e(t,r,n,i,a){for(var f=1,o=n+1;o<r.length;++o)f*=r[o];var u=r[n];if(r.length-n==4){var s=r[n+1],c=r[n+2],l=r[n+3];for(o=0;o<u;++o)w(t[o],s,c,l,i,a),a+=f}else for(o=0;o<u;++o)e(t[o],r,n+1,i,a),a+=f}(e,t,0,f,0)}return f};function w(e,t,r,n,i,a){for(var f=a,o=0;o<t;++o)for(var u=e[o],s=0;s<r;++s)for(var c=u[s],l=0;l<n;++l)i[f++]=c[l]}var A={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},k={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},O={dynamic:35048,stream:35040,static:35044},E=[];function _(e){return 0|A[Object.prototype.toString.call(e)]}function T(e,t){for(var r=0;r<t.length;++r)e[r]=t[r]}function D(e,t,r,n,i,a,f){for(var o=0,u=0;u<r;++u)for(var s=0;s<n;++s)e[o++]=t[i*u+a*s+f]}E[5120]=1,E[5122]=2,E[5124]=4,E[5121]=1,E[5123]=2,E[5125]=4,E[5126]=4;var C={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},S=new Float32Array(1),j=new Uint32Array(S.buffer);function V(e){for(var t=h.allocType(5123,e.length),r=0;r<e.length;++r)if(isNaN(e[r]))t[r]=65535;else if(e[r]===1/0)t[r]=31744;else if(e[r]===-1/0)t[r]=64512;else{S[0]=e[r];var n=j[0],i=n>>>31<<15,a=(n<<1>>>24)-127,f=n>>13&1023;if(a<-24)t[r]=i;else if(a<-14){var o=-14-a;t[r]=i+(f+1024>>o)}else a>15?t[r]=i+31744:t[r]=i+(a+15<<10)+f}return t}function F(e){return Array.isArray(e)||b(e)}var B=[9984,9986,9985,9987],z=[0,6409,6410,6407,6408],I={};function P(e){return"[object "+e+"]"}I[6409]=I[6406]=I[6402]=1,I[34041]=I[6410]=2,I[6407]=I[35904]=3,I[6408]=I[35906]=4;var L=P("HTMLCanvasElement"),M=P("OffscreenCanvas"),R=P("CanvasRenderingContext2D"),U=P("ImageBitmap"),N=P("HTMLImageElement"),H=P("HTMLVideoElement"),W=Object.keys(A).concat([L,M,R,U,N,H]),Q=[];Q[5121]=1,Q[5126]=4,Q[36193]=2,Q[5123]=2,Q[5125]=4;var q=[];function G(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function Y(e){return!!Array.isArray(e)&&0!==e.length&&!!F(e[0])}function X(e){return Object.prototype.toString.call(e)}function J(e){if(!e)return!1;var t=X(e);return W.indexOf(t)>=0||G(e)||Y(e)||v(e)}function K(e){return 0|A[Object.prototype.toString.call(e)]}function Z(e,t){return h.allocType(36193===e.type?5126:e.type,t)}function $(e,t){36193===e.type?(e.data=V(t),h.freeType(t)):e.data=t}function ee(e,t,r,n,i,a){var f;if(f=void 0!==q[e]?q[e]:I[e]*Q[t],a&&(f*=6),!i)return f*r*n;for(var o=0,u=r;u>=1;)o+=f*u*u,u/=2;return o}q[32854]=2,q[32855]=2,q[36194]=2,q[34041]=4,q[33776]=.5,q[33777]=.5,q[33778]=1,q[33779]=1,q[35986]=.5,q[35987]=1,q[34798]=1,q[35840]=.5,q[35841]=.25,q[35842]=.5,q[35843]=.25,q[36196]=.5;var et=[];et[32854]=2,et[32855]=2,et[36194]=2,et[33189]=2,et[36168]=1,et[34041]=4,et[35907]=4,et[34836]=16,et[34842]=8,et[34843]=6;var er=function(e,t,r,n,i){var a={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(a.srgba=35907),t.ext_color_buffer_half_float&&(a.rgba16f=34842,a.rgb16f=34843),t.webgl_color_buffer_float&&(a.rgba32f=34836);var f=[];Object.keys(a).forEach(function(e){f[a[e]]=e});var o=0,u={};function s(e){this.id=o++,this.refCount=1,this.renderbuffer=e,this.format=32854,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function c(t){var r=t.renderbuffer;e.bindRenderbuffer(36161,null),e.deleteRenderbuffer(r),t.renderbuffer=null,t.refCount=0,delete u[t.id],n.renderbufferCount--}return s.prototype.decRef=function(){--this.refCount<=0&&c(this)},i.profile&&(n.getTotalRenderbufferSize=function(){var e=0;return Object.keys(u).forEach(function(t){e+=u[t].stats.size}),e}),{create:function(t,r){var o=new s(e.createRenderbuffer());function c(t,r){var n,u,s,l=0,d=0,p=32854;if("object"==typeof t&&t){if("shape"in t){var h=t.shape;l=0|h[0],d=0|h[1]}else"radius"in t&&(l=d=0|t.radius),"width"in t&&(l=0|t.width),"height"in t&&(d=0|t.height);"format"in t&&(p=a[t.format])}else"number"==typeof t?(l=0|t,d="number"==typeof r?0|r:l):t||(l=d=1);if(l!==o.width||d!==o.height||p!==o.format)return c.width=o.width=l,c.height=o.height=d,o.format=p,e.bindRenderbuffer(36161,o.renderbuffer),e.renderbufferStorage(36161,p,l,d),i.profile&&(o.stats.size=(n=o.format,u=o.width,s=o.height,et[n]*u*s)),c.format=f[o.format],c}return u[o.id]=o,n.renderbufferCount++,c(t,r),c.resize=function(t,r){var n,a,f,u=0|t,s=0|r||u;return u===o.width&&s===o.height?c:(c.width=o.width=u,c.height=o.height=s,e.bindRenderbuffer(36161,o.renderbuffer),e.renderbufferStorage(36161,o.format,u,s),i.profile&&(o.stats.size=(n=o.format,a=o.width,f=o.height,et[n]*a*f)),c)},c._reglType="renderbuffer",c._renderbuffer=o,i.profile&&(c.stats=o.stats),c.destroy=function(){o.decRef()},c},clear:function(){g(u).forEach(c)},restore:function(){g(u).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,t.renderbuffer),e.renderbufferStorage(36161,t.format,t.width,t.height)}),e.bindRenderbuffer(36161,null)}}},en=[];en[6408]=4,en[6407]=3;var ei=[];function ea(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function ef(e,t){return e>>>t|e<<32-t}ei[5121]=1,ei[5126]=4,ei[36193]=2;var eo=[0x428a2f98,0x71374491,-0x4a3f0431,-0x164a245b,0x3956c25b,0x59f111f1,-0x6dc07d5c,-0x54e3a12b,-0x27f85568,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,-0x7f214e02,-0x6423f959,-0x3e640e8c,-0x1b64963f,-0x1041b87a,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,-0x67c1aeae,-0x57ce3993,-0x4ffcd838,-0x40a68039,-0x391ff40d,-0x2a586eb9,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,-0x7e3d36d2,-0x6d8dd37b,-0x5d40175f,-0x57e599b5,-0x3db47490,-0x3893ae5d,-0x2e6d17e7,-0x2966f9dc,-0xbf1ca7b,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,-0x7b3787ec,-0x7338fdf8,-0x6f410006,-0x5baf9315,-0x41065c09,-0x398e870e];function eu(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function es(e){return Array.prototype.slice.call(e)}function ec(e){return es(e).join("")}var el="xyzw".split(""),ed="dither",ep="blend.enable",eh="blend.color",em="blend.equation",eb="blend.func",ev="depth.enable",eg="depth.func",ey="depth.range",ex="depth.mask",ew="colorMask",eA="cull.enable",ek="cull.face",eO="frontFace",eE="lineWidth",e_="polygonOffset.enable",eT="polygonOffset.offset",eD="sample.alpha",eC="sample.enable",eS="sample.coverage",ej="stencil.enable",eV="stencil.mask",eF="stencil.func",eB="stencil.opFront",ez="stencil.opBack",eI="scissor.enable",eP="scissor.box",eL="viewport",eM="profile",eR="framebuffer",eU="vert",eN="frag",eH="elements",eW="primitive",eQ="count",eq="offset",eG="instances",eY="Width",eX="Height",eJ=eR+eY,eK=eR+eX,eZ=eL+eY,e$=eL+eX,e0="drawingBuffer",e1=e0+eY,e3=e0+eX,e6=[eb,em,eF,eB,ez,eS,eL,eP,eT],e5={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},e2={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},e4={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},e7={cw:2304,ccw:2305};function e8(e){return Array.isArray(e)||b(e)||v(e)}function e9(e){return e.sort(function(e,t){return e===eL?-1:t===eL?1:e<t?-1:1})}function te(e,t,r,n){this.thisDep=e,this.contextDep=t,this.propDep=r,this.append=n}function tt(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function tr(e){return new te(!1,!1,!1,e)}function tn(e,t){var r=e.type;if(0===r){var n=e.data.length;return new te(!0,n>=1,n>=2,t)}if(4===r){var i=e.data;return new te(i.thisDep,i.contextDep,i.propDep,t)}if(5===r)return new te(!1,!1,!1,t);if(6!==r)return new te(3===r,2===r,1===r,t);for(var a=!1,f=!1,o=!1,u=0;u<e.data.length;++u){var s=e.data[u];if(1===s.type)o=!0;else if(2===s.type)f=!0;else if(3===s.type)a=!0;else if(0===s.type){a=!0;var c=s.data;c>=1&&(f=!0),c>=2&&(o=!0)}else 4===s.type&&(a=a||s.data.thisDep,f=f||s.data.contextDep,o=o||s.data.propDep)}return new te(a,f,o,t)}var ti=new te(!1,!1,!1,function(){}),ta=function(e,t){if(!t.ext_disjoint_timer_query)return null;var r=[],n=[];function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[],f=[];function o(e,t,r){var n=a.pop()||new i;n.startQueryIndex=e,n.endQueryIndex=t,n.sum=0,n.stats=r,f.push(n)}var u=[],s=[];return{beginQuery:function(e){var i=r.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(35007,i),n.push(i),o(n.length-1,n.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:o,update:function(){var e,i,o=n.length;if(0!==o){s.length=Math.max(s.length,o+1),u.length=Math.max(u.length,o+1),u[0]=0,s[0]=0;var c=0;for(i=0,e=0;i<n.length;++i){var l=n[i];t.ext_disjoint_timer_query.getQueryObjectEXT(l,34919)?(c+=t.ext_disjoint_timer_query.getQueryObjectEXT(l,34918),r.push(l)):n[e++]=l,u[i+1]=c,s[i+1]=e}for(i=0,n.length=e,e=0;i<f.length;++i){var d=f[i],p=d.startQueryIndex,h=d.endQueryIndex;d.sum+=u[h]-u[p];var m=s[p],b=s[h];b===m?(d.stats.gpuTime+=d.sum/1e6,a.push(d)):(d.startQueryIndex=m,d.endQueryIndex=b,f[e++]=d)}f.length=e}},getNumPendingQueries:function(){return n.length},clear:function(){r.push.apply(r,n);for(var e=0;e<r.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(r[e]);n.length=0,r.length=0},restore:function(){n.length=0,r.length=0}}},tf="webglcontextlost",to="webglcontextrestored";function tu(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r;return -1}return function(t){var n,d,p=function(t){var r,n,i,a,f=t||{},o={},u=[],l=[],d="undefined"==typeof window?1:window.devicePixelRatio,p=!1,h={},m=function(e){},b=function(){};if("string"==typeof f?r=document.querySelector(f):"object"==typeof f&&("string"==typeof f.nodeName&&"function"==typeof f.appendChild&&"function"==typeof f.getBoundingClientRect?r=f:"function"==typeof f.drawArrays||"function"==typeof f.drawElements?i=(a=f).canvas:("gl"in f?a=f.gl:"canvas"in f?i=c(f.canvas):"container"in f&&(n=c(f.container)),"attributes"in f&&(o=f.attributes),"extensions"in f&&(u=s(f.extensions)),"optionalExtensions"in f&&(l=s(f.optionalExtensions)),"onDone"in f&&(m=f.onDone),"profile"in f&&(p=!!f.profile),"pixelRatio"in f&&(d=+f.pixelRatio),"cachedCode"in f&&(h=f.cachedCode))),r&&("canvas"===r.nodeName.toLowerCase()?i=r:n=r),!a){if(!i){var v=function(t,r,n){var i,a=document.createElement("canvas");function f(){var e=window.innerWidth,r=window.innerHeight;if(t!==document.body){var i=a.getBoundingClientRect();e=i.right-i.left,r=i.bottom-i.top}a.width=n*e,a.height=n*r}return e(a.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),t.appendChild(a),t===document.body&&(a.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver(function(){setTimeout(f)})).observe(t):window.addEventListener("resize",f,!1),f(),{canvas:a,onDestroy:function(){i?i.disconnect():window.removeEventListener("resize",f),t.removeChild(a)}}}(n||document.body,0,d);if(!v)return null;i=v.canvas,b=v.onDestroy}void 0===o.premultipliedAlpha&&(o.premultipliedAlpha=!0),a=function(e,t){function r(r){try{return e.getContext(r,t)}catch(e){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}(i,o)}return a?{gl:a,canvas:i,container:n,extensions:u,optionalExtensions:l,pixelRatio:d,profile:p,cachedCode:h,onDone:m,onDestroy:b}:(b(),m("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(t);if(!p)return null;var w=p.gl,A=w.getContextAttributes(),S=w.isContextLost(),j=function(e,t){var r={};function n(t){var n,i=t.toLowerCase();try{n=r[i]=e.getExtension(i)}catch(e){}return!!n}for(var i=0;i<t.extensions.length;++i){var a=t.extensions[i];if(!n(a))return t.onDestroy(),t.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(e){if(r[e]&&!n(e))throw Error("(regl): error restoring extension "+e)})}}}(w,p);if(!j)return null;var P=(n={"":0},d=[""],{id:function(e){var t=n[e];return t||(t=n[e]=d.length,d.push(e)),t},str:function(e){return d[e]}}),W={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Q=p.cachedCode||{},q=j.extensions,et=ta(w,q),eY=u(),eX=w.drawingBufferWidth,e0=w.drawingBufferHeight,ts={tick:0,time:0,viewportWidth:eX,viewportHeight:e0,framebufferWidth:eX,framebufferHeight:e0,drawingBufferWidth:eX,drawingBufferHeight:e0,pixelRatio:p.pixelRatio},tc={elements:null,primitive:4,count:-1,offset:0,instances:-1},tl=m(w,q),td=function(e,t,r,n){var i=0,a={};function f(t){this.id=i++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}f.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},f.prototype.destroy=function(){c(this)};var o=[];function u(t,r,n){t.byteLength=r.byteLength,e.bufferData(t.type,r,n)}function s(e,t,r,n,i,a){if(e.usage=r,Array.isArray(t)){if(e.dtype=n||5126,t.length>0)if(Array.isArray(t[0])){for(var f,o=y(t),s=1,c=1;c<o.length;++c)s*=o[c];e.dimension=s,f=x(t,o,e.dtype),u(e,f,r),a?e.persistentData=f:h.freeType(f)}else if("number"==typeof t[0]){e.dimension=i;var l=h.allocType(e.dtype,t.length);T(l,t),u(e,l,r),a?e.persistentData=l:h.freeType(l)}else b(t[0])&&(e.dimension=t[0].length,e.dtype=n||_(t[0])||5126,f=x(t,[t.length,t[0].length],e.dtype),u(e,f,r),a?e.persistentData=f:h.freeType(f))}else if(b(t))e.dtype=n||_(t),e.dimension=i,u(e,t,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(v(t)){o=t.shape;var d=t.stride,p=t.offset,m=0,g=0,w=0,A=0;1===o.length?(m=o[0],g=1,w=d[0],A=0):2===o.length&&(m=o[0],g=o[1],w=d[0],A=d[1]),e.dtype=n||_(t.data)||5126,e.dimension=g;var k=h.allocType(e.dtype,m*g);D(k,t.data,m,g,w,A,p),u(e,k,r),a?e.persistentData=k:h.freeType(k)}else t instanceof ArrayBuffer&&(e.dtype=5121,e.dimension=i,u(e,t,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(t))))}function c(r){t.bufferCount--,n(r);var i=r.buffer;e.deleteBuffer(i),r.buffer=null,delete a[r.id]}return r.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(a).forEach(function(t){e+=a[t].stats.size}),e}),{create:function(n,i,o,u){t.bufferCount++;var l=new f(i);function d(t){var n=35044,i=null,a=0,f=0,o=1;return Array.isArray(t)||b(t)||v(t)||t instanceof ArrayBuffer?i=t:"number"==typeof t?a=0|t:t&&("data"in t&&(i=t.data),"usage"in t&&(n=O[t.usage]),"type"in t&&(f=k[t.type]),"dimension"in t&&(o=0|t.dimension),"length"in t&&(a=0|t.length)),l.bind(),i?s(l,i,n,f,o,u):(a&&e.bufferData(l.type,a,n),l.dtype=f||5121,l.usage=n,l.dimension=o,l.byteLength=a),r.profile&&(l.stats.size=l.byteLength*E[l.dtype]),d}function p(t,r){e.bufferSubData(l.type,r,t)}return a[l.id]=l,o||d(n),d._reglType="buffer",d._buffer=l,d.subdata=function(e,t){var r,n=0|(t||0);if(l.bind(),b(e)||e instanceof ArrayBuffer)p(e,n);else if(Array.isArray(e)){if(e.length>0){if("number"==typeof e[0]){var i=h.allocType(l.dtype,e.length);T(i,e),p(i,n),h.freeType(i)}else if(Array.isArray(e[0])||b(e[0])){r=y(e);var a=x(e,r,l.dtype);p(a,n),h.freeType(a)}}}else if(v(e)){r=e.shape;var f=e.stride,o=0,u=0,s=0,c=0;1===r.length?(o=r[0],u=1,s=f[0],c=0):2===r.length&&(o=r[0],u=r[1],s=f[0],c=f[1]);var m=Array.isArray(e.data)?l.dtype:_(e.data),g=h.allocType(m,o*u);D(g,e.data,o,u,s,c,e.offset),p(g,n),h.freeType(g)}return d},r.profile&&(d.stats=l.stats),d.destroy=function(){c(l)},d},createStream:function(e,t){var r=o.pop();return r||(r=new f(e)),r.bind(),s(r,t,35040,0,1,!1),r},destroyStream:function(e){o.push(e)},clear:function(){g(a).forEach(c),o.forEach(c)},getBuffer:function(e){return e&&e._buffer instanceof f?e._buffer:null},restore:function(){g(a).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:s}}(w,W,p,function(e){return th.destroyBuffer(e)}),tp=function(e,t,r,n){var i={},a=0,f={uint8:5121,uint16:5123};function o(e){this.id=a++,i[this.id]=this,this.buffer=e,this.primType=4,this.vertCount=0,this.type=0}t.oes_element_index_uint&&(f.uint32=5125),o.prototype.bind=function(){this.buffer.bind()};var u=[];function s(n,i,a,f,o,u,s){if(n.buffer.bind(),i){var c,l=s;!s&&(!b(i)||v(i)&&!b(i.data))&&(l=t.oes_element_index_uint?5125:5123),r._initBuffer(n.buffer,i,a,l,3)}else e.bufferData(34963,u,a),n.buffer.dtype=c||5121,n.buffer.usage=a,n.buffer.dimension=3,n.buffer.byteLength=u;if(c=s,!s){switch(n.buffer.dtype){case 5121:case 5120:c=5121;break;case 5123:case 5122:c=5123;break;case 5125:case 5124:c=5125}n.buffer.dtype=c}n.type=c;var d=o;d<0&&(d=n.buffer.byteLength,5123===c?d>>=1:5125===c&&(d>>=2)),n.vertCount=d;var p=f;if(f<0){p=4;var h=n.buffer.dimension;1===h&&(p=0),2===h&&(p=1),3===h&&(p=4)}n.primType=p}function c(e){n.elementsCount--,delete i[e.id],e.buffer.destroy(),e.buffer=null}return{create:function(e,t){var i=r.create(null,34963,!0),a=new o(i._buffer);function u(e){if(e)if("number"==typeof e)i(e),a.primType=4,a.vertCount=0|e,a.type=5121;else{var t=null,r=35044,n=-1,o=-1,c=0,l=0;Array.isArray(e)||b(e)||v(e)?t=e:("data"in e&&(t=e.data),"usage"in e&&(r=O[e.usage]),"primitive"in e&&(n=C[e.primitive]),"count"in e&&(o=0|e.count),"type"in e&&(l=f[e.type]),"length"in e?c=0|e.length:(c=o,5123===l||5122===l?c*=2:(5125===l||5124===l)&&(c*=4))),s(a,t,r,n,o,c,l)}else i(),a.primType=4,a.vertCount=0,a.type=5121;return u}return n.elementsCount++,u(e),u._reglType="elements",u._elements=a,u.subdata=function(e,t){return i.subdata(e,t),u},u.destroy=function(){c(a)},u},createStream:function(e){var t=u.pop();return t||(t=new o(r.create(null,34963,!0,!1)._buffer)),s(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){u.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof o?e._elements:null},clear:function(){g(i).forEach(c)}}}(w,q,td,W),th=function(e,t,r,n,i,a,f){for(var o=r.maxAttributes,u=Array(o),s=0;s<o;++s)u[s]=new ea;var c=0,l={},d={Record:ea,scope:{},state:u,currentVAO:null,targetVAO:null,restore:p()?function(){p()&&g(l).forEach(function(e){e.refresh()})}:function(){},createVAO:function(e){var t=new m;function r(e){if(Array.isArray(e))s=e,t.elements&&t.ownsElements&&t.elements.destroy(),t.elements=null,t.ownsElements=!1,t.offset=0,t.count=0,t.instances=-1,t.primitive=4;else{if(e.elements){var n=e.elements;t.ownsElements?("function"==typeof n&&"elements"===n._reglType?t.elements.destroy():t.elements(n),t.ownsElements=!1):a.getElements(e.elements)?(t.elements=e.elements,t.ownsElements=!1):(t.elements=a.create(e.elements),t.ownsElements=!0)}else t.elements=null,t.ownsElements=!1;s=e.attributes,t.offset=0,t.count=-1,t.instances=-1,t.primitive=4,t.elements&&(t.count=t.elements._elements.vertCount,t.primitive=t.elements._elements.primType),"offset"in e&&(t.offset=0|e.offset),"count"in e&&(t.count=0|e.count),"instances"in e&&(t.instances=0|e.instances),"primitive"in e&&(t.primitive=C[e.primitive])}var f={},o=t.attributes;o.length=s.length;for(var u=0;u<s.length;++u){var s,c,l=s[u],d=o[u]=new ea,p=l.data||l;Array.isArray(p)||b(p)||v(p)?(t.buffers[u]&&(c=t.buffers[u],b(p)&&c._buffer.byteLength>=p.byteLength?c.subdata(p):(c.destroy(),t.buffers[u]=null)),t.buffers[u]||(c=t.buffers[u]=i.create(l,34962,!1,!0)),d.buffer=i.getBuffer(c),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1,f[u]=1):i.getBuffer(l)?(d.buffer=i.getBuffer(l),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1):i.getBuffer(l.buffer)?(d.buffer=i.getBuffer(l.buffer),d.size=0|(+l.size||d.buffer.dimension),d.normalized=!!l.normalized,"type"in l?d.type=k[l.type]:d.type=d.buffer.dtype,d.offset=0|(l.offset||0),d.stride=0|(l.stride||0),d.divisor=0|(l.divisor||0),d.state=1):"x"in l&&(d.x=+l.x||0,d.y=+l.y||0,d.z=+l.z||0,d.w=+l.w||0,d.state=2)}for(var h=0;h<t.buffers.length;++h)!f[h]&&t.buffers[h]&&(t.buffers[h].destroy(),t.buffers[h]=null);return t.refresh(),r}return n.vaoCount+=1,r.destroy=function(){for(var e=0;e<t.buffers.length;++e)t.buffers[e]&&t.buffers[e].destroy();t.buffers.length=0,t.ownsElements&&(t.elements.destroy(),t.elements=null,t.ownsElements=!1),t.destroy()},r._vao=t,r._reglType="vao",r(e)},getVAO:function(e){return"function"==typeof e&&e._vao?e._vao:null},destroyBuffer:function(t){for(var r=0;r<u.length;++r){var n=u[r];n.buffer===t&&(e.disableVertexAttribArray(r),n.buffer=null)}},setVAO:p()?function(e){if(e!==d.currentVAO){var t=p();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),d.currentVAO=e}}:function(t){if(t!==d.currentVAO){if(t)t.bindAttrs();else{for(var r=h(),n=0;n<u.length;++n){var i=u[n];i.buffer?(e.enableVertexAttribArray(n),i.buffer.bind(),e.vertexAttribPointer(n,i.size,i.type,i.normalized,i.stride,i.offfset),r&&i.divisor&&r.vertexAttribDivisorANGLE(n,i.divisor)):(e.disableVertexAttribArray(n),e.vertexAttrib4f(n,i.x,i.y,i.z,i.w))}f.elements?e.bindBuffer(34963,f.elements.buffer.buffer):e.bindBuffer(34963,null)}d.currentVAO=t}},clear:p()?function(){g(l).forEach(function(e){e.destroy()})}:function(){}};function p(){return t.oes_vertex_array_object}function h(){return t.angle_instanced_arrays}function m(){this.id=++c,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var e=p();e?this.vao=e.createVertexArrayOES():this.vao=null,l[this.id]=this,this.buffers=[]}return m.prototype.bindAttrs=function(){for(var t=h(),r=this.attributes,n=0;n<r.length;++n){var i=r[n];i.buffer?(e.enableVertexAttribArray(n),e.bindBuffer(34962,i.buffer.buffer),e.vertexAttribPointer(n,i.size,i.type,i.normalized,i.stride,i.offset),t&&i.divisor&&t.vertexAttribDivisorANGLE(n,i.divisor)):(e.disableVertexAttribArray(n),e.vertexAttrib4f(n,i.x,i.y,i.z,i.w))}for(var f=r.length;f<o;++f)e.disableVertexAttribArray(f);var u=a.getElements(this.elements);u?e.bindBuffer(34963,u.buffer.buffer):e.bindBuffer(34963,null)},m.prototype.refresh=function(){var e=p();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),d.currentVAO=null,e.bindVertexArrayOES(null))},m.prototype.destroy=function(){if(this.vao){var e=p();this===d.currentVAO&&(d.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),l[this.id]&&(delete l[this.id],n.vaoCount-=1)},d}(w,q,tl,W,td,tp,tc),tm=function(t,r,n,i){var a={},f={};function o(e,t,r,n){this.name=e,this.id=t,this.location=r,this.info=n}function u(e,t){for(var r=0;r<e.length;++r)if(e[r].id===t.id){e[r].location=t.location;return}e.push(t)}function s(e,n,i){var o=35632===e?a:f,u=o[n];if(!u){var s=r.str(n);u=t.createShader(e),t.shaderSource(u,s),t.compileShader(u),o[n]=u}return u}var c={},l=[],d=0;function p(e,t){this.id=d++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function h(e,n,a){var f,c,l=s(35632,e.fragId),d=s(35633,e.vertId),p=e.program=t.createProgram();if(t.attachShader(p,l),t.attachShader(p,d),a)for(f=0;f<a.length;++f){var h=a[f];t.bindAttribLocation(p,h[0],h[1])}t.linkProgram(p);var m=t.getProgramParameter(p,35718);i.profile&&(e.stats.uniformsCount=m);var b=e.uniforms;for(f=0;f<m;++f)if(c=t.getActiveUniform(p,f))if(c.size>1)for(var v=0;v<c.size;++v){var g=c.name.replace("[0]","["+v+"]");u(b,new o(g,r.id(g),t.getUniformLocation(p,g),c))}else u(b,new o(c.name,r.id(c.name),t.getUniformLocation(p,c.name),c));var y=t.getProgramParameter(p,35721);i.profile&&(e.stats.attributesCount=y);var x=e.attributes;for(f=0;f<y;++f)(c=t.getActiveAttrib(p,f))&&u(x,new o(c.name,r.id(c.name),t.getAttribLocation(p,c.name),c))}return i.profile&&(n.getMaxUniformsCount=function(){var e=0;return l.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},n.getMaxAttributesCount=function(){var e=0;return l.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var e=t.deleteShader.bind(t);g(a).forEach(e),a={},g(f).forEach(e),f={},l.forEach(function(e){t.deleteProgram(e.program)}),l.length=0,c={},n.shaderCount=0},program:function(r,i,o,u){var s=c[i];s||(s=c[i]={});var d=s[r];if(d&&(d.refCount++,!u))return d;var m=new p(i,r);return n.shaderCount++,h(m,o,u),d||(s[r]=m),l.push(m),e(m,{destroy:function(){if(m.refCount--,m.refCount<=0){t.deleteProgram(m.program);var e=l.indexOf(m);l.splice(e,1),n.shaderCount--}s[m.vertId].refCount<=0&&(t.deleteShader(f[m.vertId]),delete f[m.vertId],delete c[m.fragId][m.vertId]),Object.keys(c[m.fragId]).length||(t.deleteShader(a[m.fragId]),delete a[m.fragId],delete c[m.fragId])}})},restore:function(){a={},f={};for(var e=0;e<l.length;++e)h(l[e],null,l[e].attributes.map(function(e){return[e.location,e.name]}))},shader:s,frag:-1,vert:-1}}(w,P,W,p),tb=function(t,r,n,i,a,f,o){var u={"don't care":4352,"dont care":4352,nice:4354,fast:4353},s={repeat:10497,clamp:33071,mirror:33648},c={nearest:9728,linear:9729},l=e({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},c),d={none:0,browser:37444},p={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},w={};r.ext_srgb&&(m.srgb=35904,m.srgba=35906),r.oes_texture_float&&(p.float32=p.float=5126),r.oes_texture_half_float&&(p.float16=p["half float"]=36193),r.webgl_depth_texture&&(e(m,{depth:6402,"depth stencil":34041}),e(p,{uint16:5123,uint32:5125,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&e(w,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),r.webgl_compressed_texture_atc&&e(w,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&e(w,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(w["rgb etc1"]=36196);var A=Array.prototype.slice.call(t.getParameter(34467));Object.keys(w).forEach(function(e){var t=w[e];A.indexOf(t)>=0&&(m[e]=t)});var k=Object.keys(m);n.textureFormats=k;var O=[];Object.keys(m).forEach(function(e){O[m[e]]=e});var E=[];Object.keys(p).forEach(function(e){E[p[e]]=e});var _=[];Object.keys(c).forEach(function(e){_[c[e]]=e});var T=[];Object.keys(l).forEach(function(e){T[l[e]]=e});var D=[];Object.keys(s).forEach(function(e){D[s[e]]=e});var C=k.reduce(function(e,t){var n=m[t];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||r.ext_srgb&&(35904===n||35906===n)?e[n]=n:32855===n||t.indexOf("rgba")>=0?e[n]=6408:e[n]=6407,e},{});function S(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function j(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function P(e,t){if("object"==typeof t&&t){"premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=d[t.colorSpace]),"type"in t&&(e.type=p[t.type]);var r=e.width,n=e.height,i=e.channels,a=!1;"shape"in t?(r=t.shape[0],n=t.shape[1],3===t.shape.length&&(i=t.shape[2],a=!0)):("radius"in t&&(r=n=t.radius),"width"in t&&(r=t.width),"height"in t&&(n=t.height),"channels"in t&&(i=t.channels,a=!0)),e.width=0|r,e.height=0|n,e.channels=0|i;var f=!1;if("format"in t){var o=t.format,u=e.internalformat=m[o];e.format=C[u],o in p&&!("type"in t)&&(e.type=p[o]),o in w&&(e.compressed=!0),f=!0}!a&&f?e.channels=I[e.format]:a&&!f&&e.channels!==z[e.format]&&(e.format=e.internalformat=z[e.channels])}}function W(e){t.pixelStorei(37440,e.flipY),t.pixelStorei(37441,e.premultiplyAlpha),t.pixelStorei(37443,e.colorSpace),t.pixelStorei(3317,e.unpackAlignment)}function Q(){S.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function q(e,t){var r=null;if(J(t)?r=t:t&&(P(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),J(t.data)&&(r=t.data)),t.copy){var n=a.viewportWidth,i=a.viewportHeight;e.width=e.width||n-e.xOffset,e.height=e.height||i-e.yOffset,e.needsCopy=!0}else if(r){if(b(r))e.channels=e.channels||4,e.data=r,"type"in t||5121!==e.type||(e.type=K(r));else if(G(r)){e.channels=e.channels||4;var f=r,o=f.length;switch(e.type){case 5121:case 5123:case 5125:case 5126:var u=h.allocType(e.type,o);u.set(f),e.data=u;break;case 36193:e.data=V(f)}e.alignment=1,e.needsFree=!0}else if(v(r)){var s,c,l,d,p,m,g=r.data;Array.isArray(g)||5121!==e.type||(e.type=K(g));var w=r.shape,A=r.stride;3===w.length?(l=w[2],m=A[2]):(l=1,m=1),s=w[0],c=w[1],d=A[0],p=A[1],e.alignment=1,e.width=s,e.height=c,e.channels=l,e.format=e.internalformat=z[l],e.needsFree=!0,function(e,t,r,n,i,a){for(var f=e.width,o=e.height,u=e.channels,s=Z(e,f*o*u),c=0,l=0;l<o;++l)for(var d=0;d<f;++d)for(var p=0;p<u;++p)s[c++]=t[r*d+n*l+i*p+a];$(e,s)}(e,g,d,p,m,r.offset)}else if(X(r)===L||X(r)===M||X(r)===R)X(r)===L||X(r)===M?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(X(r)===U)e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(X(r)===N)e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(X(r)===H)e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(Y(r)){var k=e.width||r[0].length,O=e.height||r.length,E=e.channels;E=F(r[0][0])?E||r[0][0].length:E||1;for(var _=y(r),T=1,D=0;D<_.length;++D)T*=_[D];var C=Z(e,T);x(r,_,"",C),$(e,C),e.alignment=1,e.width=k,e.height=O,e.channels=E,e.format=e.internalformat=z[E],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;5126===e.type||e.type}function et(e,r,n,a,f){var o=e.element,u=e.data,s=e.internalformat,c=e.format,l=e.type,d=e.width,p=e.height;W(e),o?t.texSubImage2D(r,f,n,a,c,l,o):e.compressed?t.compressedTexSubImage2D(r,f,n,a,s,d,p,u):e.needsCopy?(i(),t.copyTexSubImage2D(r,f,n,a,e.xOffset,e.yOffset,d,p)):t.texSubImage2D(r,f,n,a,d,p,c,l,u)}var er=[];function en(){return er.pop()||new Q}function ei(e){e.needsFree&&h.freeType(e.data),Q.call(e),er.push(e)}function ea(){S.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function ef(e,t,r){var n=e.images[0]=en();e.mipmask=1,n.width=e.width=t,n.height=e.height=r,n.channels=e.channels=4}function eo(e,t){var r=null;if(J(t))j(r=e.images[0]=en(),e),q(r,t),e.mipmask=1;else if(P(e,t),Array.isArray(t.mipmap))for(var n=t.mipmap,i=0;i<n.length;++i)j(r=e.images[i]=en(),e),r.width>>=i,r.height>>=i,q(r,n[i]),e.mipmask|=1<<i;else j(r=e.images[0]=en(),e),q(r,t),e.mipmask=1;j(e,e.images[0]),e.compressed&&(33776===e.internalformat||33777===e.internalformat||33778===e.internalformat||e.internalformat)}function eu(e,r){for(var n=e.images,a=0;a<n.length;++a){if(!n[a])return;!function(e,r,n){var a=e.element,f=e.data,o=e.internalformat,u=e.format,s=e.type,c=e.width,l=e.height;W(e),a?t.texImage2D(r,n,u,u,s,a):e.compressed?t.compressedTexImage2D(r,n,o,c,l,0,f):e.needsCopy?(i(),t.copyTexImage2D(r,n,u,e.xOffset,e.yOffset,c,l,0)):t.texImage2D(r,n,u,c,l,0,u,s,f||null)}(n[a],r,a)}}var es=[];function ec(){var e=es.pop()||new ea;S.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function el(e){for(var t=e.images,r=0;r<t.length;++r)t[r]&&ei(t[r]),t[r]=null;es.push(e)}function ed(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function ep(e,t){"min"in t&&(e.minFilter=l[t.min],!(B.indexOf(e.minFilter)>=0)||"faces"in t||(e.genMipmaps=!0)),"mag"in t&&(e.magFilter=c[t.mag]);var r=e.wrapS,n=e.wrapT;if("wrap"in t){var i=t.wrap;"string"==typeof i?r=n=s[i]:Array.isArray(i)&&(r=s[i[0]],n=s[i[1]])}else"wrapS"in t&&(r=s[t.wrapS]),"wrapT"in t&&(n=s[t.wrapT]);if(e.wrapS=r,e.wrapT=n,"anisotropic"in t&&(t.anisotropic,e.anisotropic=t.anisotropic),"mipmap"in t){var a=!1;switch(typeof t.mipmap){case"string":e.mipmapHint=u[t.mipmap],e.genMipmaps=!0,a=!0;break;case"boolean":a=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,a=!0}!a||"min"in t||(e.minFilter=9984)}}function eh(e,n){t.texParameteri(n,10241,e.minFilter),t.texParameteri(n,10240,e.magFilter),t.texParameteri(n,10242,e.wrapS),t.texParameteri(n,10243,e.wrapT),r.ext_texture_filter_anisotropic&&t.texParameteri(n,34046,e.anisotropic),e.genMipmaps&&(t.hint(33170,e.mipmapHint),t.generateMipmap(n))}var em=0,eb={},ev=n.maxTextureUnits,eg=Array(ev).map(function(){return null});function ey(e){S.call(this),this.mipmask=0,this.internalformat=6408,this.id=em++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ed,o.profile&&(this.stats={size:0})}function ex(e){t.activeTexture(33984),t.bindTexture(e.target,e.texture)}function ew(){var e=eg[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(3553,null)}function eA(e){var r=e.texture,n=e.unit,i=e.target;n>=0&&(t.activeTexture(33984+n),t.bindTexture(i,null),eg[n]=null),t.deleteTexture(r),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete eb[e.id],f.textureCount--}return e(ey.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(e<0){for(var r=0;r<ev;++r){var n=eg[r];if(n){if(n.bindCount>0)continue;n.unit=-1}eg[r]=this,e=r;break}o.profile&&f.maxTextureUnits<e+1&&(f.maxTextureUnits=e+1),this.unit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&eA(this)}}),o.profile&&(f.getTotalTextureSize=function(){var e=0;return Object.keys(eb).forEach(function(t){e+=eb[t].stats.size}),e}),{create2D:function(e,r){var n=new ey(3553);function i(e,t){var r=n.texInfo;ed.call(r);var a=ec();return"number"==typeof e?"number"==typeof t?ef(a,0|e,0|t):ef(a,0|e,0|e):e?(ep(r,e),eo(a,e)):ef(a,1,1),r.genMipmaps&&(a.mipmask=(a.width<<1)-1),n.mipmask=a.mipmask,j(n,a),n.internalformat=a.internalformat,i.width=a.width,i.height=a.height,ex(n),eu(a,3553),eh(r,3553),ew(),el(a),o.profile&&(n.stats.size=ee(n.internalformat,n.type,a.width,a.height,r.genMipmaps,!1)),i.format=O[n.internalformat],i.type=E[n.type],i.mag=_[r.magFilter],i.min=T[r.minFilter],i.wrapS=D[r.wrapS],i.wrapT=D[r.wrapT],i}return eb[n.id]=n,f.textureCount++,i(e,r),i.subimage=function(e,t,r,a){var f=0|t,o=0|r,u=0|a,s=en();return j(s,n),s.width=0,s.height=0,q(s,e),s.width=s.width||(n.width>>u)-f,s.height=s.height||(n.height>>u)-o,ex(n),et(s,3553,f,o,u),ew(),ei(s),i},i.resize=function(e,r){var a=0|e,f=0|r||a;if(a===n.width&&f===n.height)return i;i.width=n.width=a,i.height=n.height=f,ex(n);for(var u=0;n.mipmask>>u;++u){var s=a>>u,c=f>>u;if(!s||!c)break;t.texImage2D(3553,u,n.format,s,c,0,n.format,n.type,null)}return ew(),o.profile&&(n.stats.size=ee(n.internalformat,n.type,a,f,!1,!1)),i},i._reglType="texture2d",i._texture=n,o.profile&&(i.stats=n.stats),i.destroy=function(){n.decRef()},i},createCube:function(e,r,n,i,a,u){var s=new ey(34067);eb[s.id]=s,f.cubeCount++;var c=Array(6);function l(e,t,r,n,i,a){var f,u=s.texInfo;for(ed.call(u),f=0;f<6;++f)c[f]=ec();if("number"!=typeof e&&e){if("object"==typeof e)if(t)eo(c[0],e),eo(c[1],t),eo(c[2],r),eo(c[3],n),eo(c[4],i),eo(c[5],a);else if(ep(u,e),P(s,e),"faces"in e){var d=e.faces;for(f=0;f<6;++f)j(c[f],s),eo(c[f],d[f])}else for(f=0;f<6;++f)eo(c[f],e)}else{var p=0|e||1;for(f=0;f<6;++f)ef(c[f],p,p)}for(j(s,c[0]),u.genMipmaps?s.mipmask=(c[0].width<<1)-1:s.mipmask=c[0].mipmask,s.internalformat=c[0].internalformat,l.width=c[0].width,l.height=c[0].height,ex(s),f=0;f<6;++f)eu(c[f],34069+f);for(eh(u,34067),ew(),o.profile&&(s.stats.size=ee(s.internalformat,s.type,l.width,l.height,u.genMipmaps,!0)),l.format=O[s.internalformat],l.type=E[s.type],l.mag=_[u.magFilter],l.min=T[u.minFilter],l.wrapS=D[u.wrapS],l.wrapT=D[u.wrapT],f=0;f<6;++f)el(c[f]);return l}return l(e,r,n,i,a,u),l.subimage=function(e,t,r,n,i){var a=0|r,f=0|n,o=0|i,u=en();return j(u,s),u.width=0,u.height=0,q(u,t),u.width=u.width||(s.width>>o)-a,u.height=u.height||(s.height>>o)-f,ex(s),et(u,34069+e,a,f,o),ew(),ei(u),l},l.resize=function(e){var r=0|e;if(r!==s.width){l.width=s.width=r,l.height=s.height=r,ex(s);for(var n=0;n<6;++n)for(var i=0;s.mipmask>>i;++i)t.texImage2D(34069+n,i,s.format,r>>i,r>>i,0,s.format,s.type,null);return ew(),o.profile&&(s.stats.size=ee(s.internalformat,s.type,l.width,l.height,!1,!0)),l}},l._reglType="textureCube",l._texture=s,o.profile&&(l.stats=s.stats),l.destroy=function(){s.decRef()},l},clear:function(){for(var e=0;e<ev;++e)t.activeTexture(33984+e),t.bindTexture(3553,null),eg[e]=null;g(eb).forEach(eA),f.cubeCount=0,f.textureCount=0},getTexture:function(e){return null},restore:function(){for(var e=0;e<ev;++e){var r=eg[e];r&&(r.bindCount=0,r.unit=-1,eg[e]=null)}g(eb).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var r=0;r<32;++r)if((e.mipmask&1<<r)!=0)if(3553===e.target)t.texImage2D(3553,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null);else for(var n=0;n<6;++n)t.texImage2D(34069+n,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null);eh(e.texInfo,e.target)})},refresh:function(){for(var e=0;e<ev;++e){var r=eg[e];r&&(r.bindCount=0,r.unit=-1,eg[e]=null),t.activeTexture(33984+e),t.bindTexture(3553,null),t.bindTexture(34067,null)}}}}(w,q,tl,function(){ty.procs.poll()},ts,W,p),tv=er(w,q,tl,W,p),tg=function(t,r,n,i,a,f){var o={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],s=["rgba4","rgb565","rgb5 a1"];r.ext_srgb&&s.push("srgba"),r.ext_color_buffer_half_float&&s.push("rgba16f","rgb16f"),r.webgl_color_buffer_float&&s.push("rgba32f");var c=["uint8"];function l(e,t,r){this.target=e,this.texture=t,this.renderbuffer=r;var n=0,i=0;t?(n=t.width,i=t.height):r&&(n=r.width,i=r.height),this.width=n,this.height=i}function d(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function p(e,t,r){if(e)if(e.texture){var n=e.texture._texture;n.width,n.height,n.refCount+=1}else{var i=e.renderbuffer._renderbuffer;i.refCount+=1}}function h(e,r){r&&(r.texture?t.framebufferTexture2D(36160,e,r.target,r.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,r.renderbuffer._renderbuffer.renderbuffer))}function m(e){var t=3553,r=null,n=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target));var a=i._reglType;return"texture2d"===a||"textureCube"===a?r=i:"renderbuffer"===a&&(n=i,t=36161),new l(t,r,n)}function b(e,t,r,n,f){if(r){var o=i.create2D({width:e,height:t,format:n,type:f});return o._texture.refCount=0,new l(3553,o,null)}var u=a.create({width:e,height:t,format:n});return u._renderbuffer.refCount=0,new l(36161,null,u)}function v(e){return e&&(e.texture||e.renderbuffer)}function y(e,t,r){e&&(e.texture?e.texture.resize(t,r):e.renderbuffer&&e.renderbuffer.resize(t,r),e.width=t,e.height=r)}r.oes_texture_half_float&&c.push("half float","float16"),r.oes_texture_float&&c.push("float","float32");var x=0,w={};function A(){this.id=x++,w[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function k(e){e.colorAttachments.forEach(d),d(e.depthAttachment),d(e.stencilAttachment),d(e.depthStencilAttachment)}function O(e){var r=e.framebuffer;t.deleteFramebuffer(r),e.framebuffer=null,f.framebufferCount--,delete w[e.id]}function E(e){t.bindFramebuffer(36160,e.framebuffer);var r,i=e.colorAttachments;for(r=0;r<i.length;++r)h(36064+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)t.framebufferTexture2D(36160,36064+r,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),h(36096,e.depthAttachment),h(36128,e.stencilAttachment),h(33306,e.depthStencilAttachment),t.checkFramebufferStatus(36160),t.isContextLost(),t.bindFramebuffer(36160,o.next?o.next.framebuffer:null),o.cur=o.next,t.getError()}function _(t,r){var n=new A;function i(e,t){var r,a=0,f=0,o=!0,c=!0,l=null,d=!0,h="rgba",g="uint8",y=1,x=null,w=null,A=null,O=!1;if("number"==typeof e)a=0|e,f=0|t||a;else if(e){if("shape"in e){var _=e.shape;a=_[0],f=_[1]}else"radius"in e&&(a=f=e.radius),"width"in e&&(a=e.width),"height"in e&&(f=e.height);("color"in e||"colors"in e)&&Array.isArray(l=e.color||e.colors),!l&&("colorCount"in e&&(y=0|e.colorCount),"colorTexture"in e&&(d=!!e.colorTexture,h="rgba4"),"colorType"in e&&(g=e.colorType,d||("half float"===g||"float16"===g?h="rgba16f":("float"===g||"float32"===g)&&(h="rgba32f"))),"colorFormat"in e&&(h=e.colorFormat,u.indexOf(h)>=0?d=!0:s.indexOf(h)>=0&&(d=!1))),("depthTexture"in e||"depthStencilTexture"in e)&&(O=!!(e.depthTexture||e.depthStencilTexture)),"depth"in e&&("boolean"==typeof e.depth?o=e.depth:(x=e.depth,c=!1)),"stencil"in e&&("boolean"==typeof e.stencil?c=e.stencil:(w=e.stencil,o=!1)),"depthStencil"in e&&("boolean"==typeof e.depthStencil?o=c=e.depthStencil:(A=e.depthStencil,o=!1,c=!1))}else a=f=1;var T=null,D=null,C=null,S=null;if(Array.isArray(l))T=l.map(m);else if(l)T=[m(l)];else for(r=0,T=Array(y);r<y;++r)T[r]=b(a,f,d,h,g);a=a||T[0].width,f=f||T[0].height,x?D=m(x):o&&!c&&(D=b(a,f,O,"depth","uint32")),w?C=m(w):c&&!o&&(C=b(a,f,!1,"stencil","uint8")),A?S=m(A):!x&&!w&&c&&o&&(S=b(a,f,O,"depth stencil","depth stencil"));var j=null;for(r=0;r<T.length;++r)if(p(T[r],a,f),T[r]&&T[r].texture){var V=en[T[r].texture._texture.format]*ei[T[r].texture._texture.type];null===j&&(j=V)}return p(D,a,f),p(C,a,f),p(S,a,f),k(n),n.width=a,n.height=f,n.colorAttachments=T,n.depthAttachment=D,n.stencilAttachment=C,n.depthStencilAttachment=S,i.color=T.map(v),i.depth=v(D),i.stencil=v(C),i.depthStencil=v(S),i.width=n.width,i.height=n.height,E(n),i}return f.framebufferCount++,i(t,r),e(i,{resize:function(e,t){var r=Math.max(0|e,1),a=Math.max(0|t||r,1);if(r===n.width&&a===n.height)return i;for(var f=n.colorAttachments,o=0;o<f.length;++o)y(f[o],r,a);return y(n.depthAttachment,r,a),y(n.stencilAttachment,r,a),y(n.depthStencilAttachment,r,a),n.width=i.width=r,n.height=i.height=a,E(n),i},_reglType:"framebuffer",_framebuffer:n,destroy:function(){O(n),k(n)},use:function(e){o.setFBO({framebuffer:i},e)}})}return e(o,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof A)return t}return null},create:_,createCube:function(t){var r=Array(6);function n(t){var a,f,o={color:null},u=0,s=null,c="rgba",l="uint8",d=1;if("number"==typeof t?u=0|t:t?("shape"in t?u=t.shape[0]:("radius"in t&&(u=0|t.radius),"width"in t?(u=0|t.width,"height"in t):"height"in t&&(u=0|t.height)),("color"in t||"colors"in t)&&Array.isArray(s=t.color||t.colors),!s&&("colorCount"in t&&(d=0|t.colorCount),"colorType"in t&&(l=t.colorType),"colorFormat"in t&&(c=t.colorFormat)),"depth"in t&&(o.depth=t.depth),"stencil"in t&&(o.stencil=t.stencil),"depthStencil"in t&&(o.depthStencil=t.depthStencil)):u=1,s)if(Array.isArray(s))for(a=0,f=[];a<s.length;++a)f[a]=s[a];else f=[s];else{f=Array(d);var p={radius:u,format:c,type:l};for(a=0;a<d;++a)f[a]=i.createCube(p)}for(a=0,o.color=Array(f.length);a<f.length;++a){var h=f[a];u=u||h.width,o.color[a]={target:34069,data:f[a]}}for(a=0;a<6;++a){for(var m=0;m<f.length;++m)o.color[m].target=34069+a;a>0&&(o.depth=r[0].depth,o.stencil=r[0].stencil,o.depthStencil=r[0].depthStencil),r[a]?r[a](o):r[a]=_(o)}return e(n,{width:u,height:u,color:f})}return n(t),e(n,{faces:r,resize:function(e){var t,i=0|e;if(i===n.width)return n;var a=n.color;for(t=0;t<a.length;++t)a[t].resize(i);for(t=0;t<6;++t)r[t].resize(i);return n.width=n.height=i,n},_reglType:"framebufferCube",destroy:function(){r.forEach(function(e){e.destroy()})}})},clear:function(){g(w).forEach(O)},restore:function(){o.cur=null,o.next=null,o.dirty=!0,g(w).forEach(function(e){e.framebuffer=t.createFramebuffer(),E(e)})}})}(w,q,tl,tb,tv,W),ty=function(t,n,i,o,u,s,c,d,p,h,m,b,v,g,y,x){var w,A,O,E,_,T,D,S,j,V,B,z,I,P=h.Record,L={add:32774,subtract:32778,"reverse subtract":32779};i.ext_blend_minmax&&(L.min=32775,L.max=32776);var M=i.angle_instanced_arrays,R=i.webgl_draw_buffers,U=i.oes_vertex_array_object,N={dirty:!0,profile:x.profile},H={},W=[],Q={},q={};function G(e){return e.replace(".","_")}function Y(e,t,r){var n=G(e);W.push(e),H[n]=N[n]=!!r,Q[n]=t}function X(e,t,r){var n=G(e);W.push(e),Array.isArray(r)?(N[n]=r.slice(),H[n]=r.slice()):N[n]=H[n]=r,q[n]=t}function J(e){return!!isNaN(e)}Y(ed,3024),Y(ep,3042),X(eh,"blendColor",[0,0,0,0]),X(em,"blendEquationSeparate",[32774,32774]),X(eb,"blendFuncSeparate",[1,0,1,0]),Y(ev,2929,!0),X(eg,"depthFunc",513),X(ey,"depthRange",[0,1]),X(ex,"depthMask",!0),X(ew,ew,[!0,!0,!0,!0]),Y(eA,2884),X(ek,"cullFace",1029),X(eO,eO,2305),X(eE,eE,1),Y(e_,32823),X(eT,"polygonOffset",[0,0]),Y(eD,32926),Y(eC,32928),X(eS,"sampleCoverage",[1,!1]),Y(ej,2960),X(eV,"stencilMask",-1),X(eF,"stencilFunc",[519,0,-1]),X(eB,"stencilOpSeparate",[1028,7680,7680,7680]),X(ez,"stencilOpSeparate",[1029,7680,7680,7680]),Y(eI,3089),X(eP,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),X(eL,eL,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var K={gl:t,context:v,strings:n,next:H,current:N,draw:b,elements:s,buffer:u,shader:m,attributes:h.state,vao:h,uniforms:p,framebuffer:d,extensions:i,timer:g,isBufferArgs:e8},Z={primTypes:C,compareFuncs:e2,blendFuncs:e5,blendEquations:L,stencilOps:e4,glTypes:k,orientationType:e7};R&&(Z.backBuffer=[1029],Z.drawBuffer=l(o.maxDrawbuffers,function(e){return 0===e?[0]:l(e,function(e){return 36064+e})}));var $=0;function ee(){var t=function(t){var r=t&&t.cache,n=0,i=[],a=[],f=[];function o(){var t=[],r=[];return e(function(){t.push.apply(t,es(arguments))},{def:function(){var e="v"+n++;return r.push(e),arguments.length>0&&(t.push(e,"="),t.push.apply(t,es(arguments)),t.push(";")),e},toString:function(){return ec([r.length>0?"var "+r.join(",")+";":"",ec(t)])}})}function u(){var t=o(),r=o(),n=t.toString,i=r.toString;function a(e,n){r(e,n,"=",t.def(e,n),";")}return e(function(){t.apply(t,es(arguments))},{def:t.def,entry:t,exit:r,save:a,set:function(e,r,n){a(e,r),t(e,r,"=",n,";")},toString:function(){return n()+i()}})}var s=o(),c={};return{global:s,link:function(e,t){var r=t&&t.stable;if(!r){for(var o=0;o<a.length;++o)if(a[o]===e&&!f[o])return i[o]}var u="g"+n++;return i.push(u),a.push(e),f.push(r),u},block:o,proc:function(t,r){var n=[];function i(){var e="a"+n.length;return n.push(e),e}r=r||0;for(var a=0;a<r;++a)i();var f=u(),o=f.toString;return c[t]=e(f,{arg:i,toString:function(){return ec(["function(",n.join(),"){",o(),"}"])}})},scope:u,cond:function(){var t=ec(arguments),r=u(),n=u(),i=r.toString,a=n.toString;return e(r,{then:function(){return r.apply(r,es(arguments)),this},else:function(){return n.apply(n,es(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),ec(["if(",t,"){",i(),"}",e])}})},compile:function(){var e,t=['"use strict";',s,"return {"];Object.keys(c).forEach(function(e){t.push('"',e,'":',c[e].toString(),",")}),t.push("}");var n=ec(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");if(r&&r[e=function(e){for(var t,r="0123456789abcdef",n="",i=0;i<e.length;i++)n+=r.charAt((t=e.charCodeAt(i))>>>4&15)+r.charAt(15&t);return n}(function(e){for(var t=function(e,t){var r,n,i,a,f,o,u,s,c,l,d,p,h,m,b,v,g,y,x,w,A=[0x6a09e667,-0x4498517b,0x3c6ef372,-0x5ab00ac6,0x510e527f,-0x64fa9774,0x1f83d9ab,0x5be0cd19],k=Array(64);for(e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t,g=0;g<e.length;g+=16){for(y=0,c=A[0],l=A[1],d=A[2],p=A[3],h=A[4],m=A[5],b=A[6],v=A[7];y<64;y++){y<16?k[y]=e[y+g]:k[y]=eu(eu(eu(ef(r=k[y-2],17)^ef(r,19)^r>>>10,k[y-7]),ef(n=k[y-15],7)^ef(n,18)^n>>>3),k[y-16]),x=eu(eu(eu(eu(v,ef(i=h,6)^ef(i,11)^ef(i,25)),(a=h)&m^~a&b),eo[y]),k[y]),w=eu(ef(f=c,2)^ef(f,13)^ef(f,22),(o=c)&(u=l)^o&(s=d)^u&s),v=b,b=m,m=h,h=eu(p,x),p=d,d=l,l=c,c=eu(x,w)}A[0]=eu(c,A[0]),A[1]=eu(l,A[1]),A[2]=eu(d,A[2]),A[3]=eu(p,A[3]),A[4]=eu(h,A[4]),A[5]=eu(m,A[5]),A[6]=eu(b,A[6]),A[7]=eu(v,A[7])}return A}(function(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(var r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<24-r%32;return t}(e),8*e.length),r="",n=0;n<32*t.length;n+=8)r+=String.fromCharCode(t[n>>5]>>>24-n%32&255);return r}(function(e){for(var t,r,n="",i=-1;++i<e.length;)t=e.charCodeAt(i),r=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),i++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}(n)))])return r[e].apply(null,a);var f=Function.apply(null,i.concat(n));return r&&(r[e]=f),f.apply(null,a)}}}({cache:y}),r=t.link,i=t.global;t.id=$++,t.batchId="0";var a=r(K),f=t.shared={props:"a0"};Object.keys(K).forEach(function(e){f[e]=i.def(a,".",e)});var o=t.next={},u=t.current={};Object.keys(q).forEach(function(e){Array.isArray(N[e])&&(o[e]=i.def(f.next,".",e),u[e]=i.def(f.current,".",e))});var s=t.constants={};Object.keys(Z).forEach(function(e){s[e]=i.def(JSON.stringify(Z[e]))}),t.invoke=function(e,n){switch(n.type){case 0:var i=["this",f.context,f.props,t.batchId];return e.def(r(n.data),".call(",i.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(f.props,n.data);case 2:return e.def(f.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map(function(r){return t.invoke(e,r)})}},t.attribCache={};var c={};return t.scopeAttrib=function(e){var t=n.id(e);if(t in c)return c[t];var i=h.scope[t];return i||(i=h.scope[t]=new P),c[t]=r(i)},t}function et(e,t,r){var n=e.shared.context,i=e.scope();Object.keys(r).forEach(function(a){t.save(n,"."+a);var f=r[a].append(e,t);Array.isArray(f)?i(n,".",a,"=[",f.join(),"];"):i(n,".",a,"=",f,";")}),t(i)}function er(e,t,r,n){var i,a,f=e.shared,o=f.gl,u=f.framebuffer;R&&(i=t.def(f.extensions,".webgl_draw_buffers"));var s=e.constants,c=s.drawBuffer,l=s.backBuffer;a=r?r.append(e,t):t.def(u,".next"),n||t("if(",a,"!==",u,".cur){"),t("if(",a,"){",o,".bindFramebuffer(",36160,",",a,".framebuffer);"),R&&t(i,".drawBuffersWEBGL(",c,"[",a,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",36160,",null);"),R&&t(i,".drawBuffersWEBGL(",l,");"),t("}",u,".cur=",a,";"),n||t("}")}function en(e,t,r){var n=e.shared,i=n.gl,a=e.current,f=e.next,o=n.current,u=n.next,s=e.cond(o,".dirty");W.forEach(function(t){var n,c,d=G(t);if(!(d in r.state))if(d in f){n=f[d],c=a[d];var p=l(N[d].length,function(e){return s.def(n,"[",e,"]")});s(e.cond(p.map(function(e,t){return e+"!=="+c+"["+t+"]"}).join("||")).then(i,".",q[d],"(",p,");",p.map(function(e,t){return c+"["+t+"]="+e}).join(";"),";"))}else{n=s.def(u,".",d);var h=e.cond(n,"!==",o,".",d);s(h),d in Q?h(e.cond(n).then(i,".enable(",Q[d],");").else(i,".disable(",Q[d],");"),o,".",d,"=",n,";"):h(i,".",q[d],"(",n,");",o,".",d,"=",n,";")}}),0===Object.keys(r.state).length&&s(o,".dirty=false;"),t(s)}function ei(e,t,r,n){var i,a=e.shared,f=e.current,o=a.current,u=a.gl;e9(Object.keys(r)).forEach(function(a){var s=r[a];if(!n||n(s)){var c=s.append(e,t);if(Q[a]){var l=Q[a];tt(s)?(i=e.link(c,{stable:!0}),t(e.cond(i).then(u,".enable(",l,");").else(u,".disable(",l,");")),t(o,".",a,"=",i,";")):(t(e.cond(c).then(u,".enable(",l,");").else(u,".disable(",l,");")),t(o,".",a,"=",c,";"))}else if(F(c)){var d=f[a];t(u,".",q[a],"(",c,");",c.map(function(e,t){return d+"["+t+"]="+e}).join(";"),";")}else tt(s)?(i=e.link(c,{stable:!0}),t(u,".",q[a],"(",i,");",o,".",a,"=",i,";")):t(u,".",q[a],"(",c,");",o,".",a,"=",c,";")}})}function ea(e,t){M&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function eY(e,t,r,n,i){var a,f,o,u=e.shared,s=e.stats,c=u.current,l=u.timer,d=r.profile;function p(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function h(e){e(a=t.def(),"=",p(),";"),"string"==typeof i?e(s,".count+=",i,";"):e(s,".count++;"),g&&(n?e(f=t.def(),"=",l,".getNumPendingQueries();"):e(l,".beginQuery(",s,");"))}function m(e){e(s,".cpuTime+=",p(),"-",a,";"),g&&(n?e(l,".pushScopeStats(",f,",",l,".getNumPendingQueries(),",s,");"):e(l,".endQuery();"))}function b(e){var r=t.def(c,".profile");t(c,".profile=",e,";"),t.exit(c,".profile=",r,";")}if(d){if(tt(d))return void(d.enable?(h(t),m(t.exit),b("true")):b("false"));b(o=d.append(e,t))}else o=t.def(c,".profile");var v=e.block();h(v),t("if(",o,"){",v,"}");var y=e.block();m(y),t.exit("if(",o,"){",y,"}")}function eX(e,t,r,n,i){var a=e.shared;n.forEach(function(n){var f,o=n.name,u=r.attributes[o];if(u){if(!i(u))return;f=u.append(e,t)}else{if(!i(ti))return;var s=e.scopeAttrib(o);f={},Object.keys(new P).forEach(function(e){f[e]=t.def(s,".",e)})}!function(r,n,i){var f=a.gl,o=t.def(r,".location"),u=t.def(a.attributes,"[",o,"]"),s=i.state,c=i.buffer,l=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];function p(){t("if(!",u,".buffer){",f,".enableVertexAttribArray(",o,");}");var r,a=i.type;if(r=i.size?t.def(i.size,"||",n):n,t("if(",u,".type!==",a,"||",u,".size!==",r,"||",d.map(function(e){return u+"."+e+"!=="+i[e]}).join("||"),"){",f,".bindBuffer(",34962,",",c,".buffer);",f,".vertexAttribPointer(",[o,r,a,i.normalized,i.stride,i.offset],");",u,".type=",a,";",u,".size=",r,";",d.map(function(e){return u+"."+e+"="+i[e]+";"}).join(""),"}"),M){var s=i.divisor;t("if(",u,".divisor!==",s,"){",e.instancing,".vertexAttribDivisorANGLE(",[o,s],");",u,".divisor=",s,";}")}}function h(){t("if(",u,".buffer){",f,".disableVertexAttribArray(",o,");",u,".buffer=null;","}if(",el.map(function(e,t){return u+"."+e+"!=="+l[t]}).join("||"),"){",f,".vertexAttrib4f(",o,",",l,");",el.map(function(e,t){return u+"."+e+"="+l[t]+";"}).join(""),"}")}1===s?p():2===s?h():(t("if(",s,"===",1,"){"),p(),t("}else{"),h(),t("}"))}(e.link(n),function(e){switch(e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(n.info.type),f)})}function e0(e,t,r,i,a,f){for(var o=e.shared,u=o.gl,s=0;s<i.length;++s){var c,d,p=i[s],h=p.name,m=p.info.type,b=r.uniforms[h],v=e.link(p)+".location";if(b){if(!a(b))continue;if(tt(b)){var g=b.value;if(35678===m||35680===m){var y=e.link(g._texture||g.color[0]._texture);t(u,".uniform1i(",v,",",y+".bind());"),t.exit(y,".unbind();")}else if(35674===m||35675===m||35676===m){var x=e.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),w=2;35675===m?w=3:35676===m&&(w=4),t(u,".uniformMatrix",w,"fv(",v,",false,",x,");")}else{switch(m){case 5126:c="1f";break;case 35664:c="2f";break;case 35665:c="3f";break;case 35666:c="4f";break;case 35670:case 5124:c="1i";break;case 35671:case 35667:c="2i";break;case 35672:case 35668:c="3i";break;case 35673:case 35669:c="4i"}t(u,".uniform",c,"(",v,",",F(g)?Array.prototype.slice.call(g):g,");")}continue}d=b.append(e,t)}else{if(!a(ti))continue;d=t.def(o.uniforms,"[",n.id(h),"]")}35678===m?t("if(",d,"&&",d,'._reglType==="framebuffer"){',d,"=",d,".color[0];","}"):35680===m&&t("if(",d,"&&",d,'._reglType==="framebufferCube"){',d,"=",d,".color[0];","}");var A=1;switch(m){case 35678:case 35680:var k=t.def(d,"._texture");t(u,".uniform1i(",v,",",k,".bind());"),t.exit(k,".unbind();");continue;case 5124:case 35670:c="1i";break;case 35667:case 35671:c="2i",A=2;break;case 35668:case 35672:c="3i",A=3;break;case 35669:case 35673:c="4i",A=4;break;case 5126:c="1f";break;case 35664:c="2f",A=2;break;case 35665:c="3f",A=3;break;case 35666:c="4f",A=4;break;case 35674:c="Matrix2fv";break;case 35675:c="Matrix3fv";break;case 35676:c="Matrix4fv"}if("M"===c.charAt(0)){t(u,".uniform",c,"(",v,",");var O=Math.pow(m-35674+2,2),E=e.global.def("new Float32Array(",O,")");Array.isArray(d)?t("false,(",l(O,function(e){return E+"["+e+"]="+d[e]}),",",E,")"):t("false,(Array.isArray(",d,")||",d," instanceof Float32Array)?",d,":(",l(O,function(e){return E+"["+e+"]="+d+"["+e+"]"}),",",E,")"),t(");")}else if(A>1){for(var _=[],T=[],D=0;D<A;++D)Array.isArray(d)?T.push(d[D]):T.push(t.def(d+"["+D+"]")),f&&_.push(t.def());f&&t("if(!",e.batchId,"||",_.map(function(e,t){return e+"!=="+T[t]}).join("||"),"){",_.map(function(e,t){return e+"="+T[t]+";"}).join("")),t(u,".uniform",c,"(",v,",",T.join(","),");"),f&&t("}")}else{if(f){var C=t.def();t("if(!",e.batchId,"||",C,"!==",d,"){",C,"=",d,";")}t(u,".uniform",c,"(",v,",",d,");"),f&&t("}")}}}function ta(e,t,r,n){var i,a,f,o,u,s,c,l,d=e.shared,p=d.gl,h=d.draw,m=n.draw,b=(a=m.elements,f=t,a?((a.contextDep&&n.contextDynamic||a.propDep)&&(f=r),i=a.append(e,f),m.elementsActive&&f("if("+i+")"+p+".bindBuffer(34963,"+i+".buffer.buffer);")):(i=f.def(),f(i,"=",h,".",eH,";","if(",i,"){",p,".bindBuffer(",34963,",",i,".buffer.buffer);}","else if(",d.vao,".currentVAO){",i,"=",e.shared.elements+".getElements("+d.vao,".currentVAO.elements);",U?"":"if("+i+")"+p+".bindBuffer(34963,"+i+".buffer.buffer);","}")),i);function v(i){var a=m[i];return a?a.contextDep&&n.contextDynamic||a.propDep?a.append(e,r):a.append(e,t):t.def(h,".",i)}var g=v(eW),y=v(eq),x=(u=m.count,s=t,u?((u.contextDep&&n.contextDynamic||u.propDep)&&(s=r),o=u.append(e,s)):o=s.def(h,".",eQ),o);if("number"==typeof x){if(0===x)return}else r("if(",x,"){"),r.exit("}");M&&(c=v(eG),l=e.instancing);var w=b+".type",A=m.elements&&tt(m.elements)&&!m.vaoActive;function k(){function e(){r(l,".drawElementsInstancedANGLE(",[g,x,w,y+"<<(("+w+"-5121)>>1)",c],");")}function t(){r(l,".drawArraysInstancedANGLE(",[g,y,x,c],");")}b&&"null"!==b?A?e():(r("if(",b,"){"),e(),r("}else{"),t(),r("}")):t()}function O(){function e(){r(p+".drawElements("+[g,x,w,y+"<<(("+w+"-5121)>>1)"]+");")}function t(){r(p+".drawArrays("+[g,y,x]+");")}b&&"null"!==b?A?e():(r("if(",b,"){"),e(),r("}else{"),t(),r("}")):t()}M&&("number"!=typeof c||c>=0)?"string"==typeof c?(r("if(",c,">0){"),k(),r("}else if(",c,"<0){"),O(),r("}")):k():O()}function tf(e,t,r,n,i){var a=ee(),f=a.proc("body",i);return M&&(a.instancing=f.def(a.shared.extensions,".angle_instanced_arrays")),e(a,f,r,n),a.compile().body}function to(e,t,r,n){ea(e,t),r.useVAO?r.drawVAO?t(e.shared.vao,".setVAO(",r.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),eX(e,t,r,n.attributes,function(){return!0})),e0(e,t,r,n.uniforms,function(){return!0},!1),ta(e,t,t,r)}function tu(e,t,r,n){function i(){return!0}e.batchId="a1",ea(e,t),eX(e,t,r,n.attributes,i),e0(e,t,r,n.uniforms,i,!1),ta(e,t,t,r)}function ts(e,t,r,n){ea(e,t);var i=r.contextDep,a=t.def(),f=t.def();e.shared.props=f,e.batchId=a;var o=e.scope(),u=e.scope();function s(e){return e.contextDep&&i||e.propDep}function c(e){return!s(e)}if(t(o.entry,"for(",a,"=0;",a,"<","a1",";++",a,"){",f,"=","a0","[",a,"];",u,"}",o.exit),r.needsContext&&et(e,u,r.context),r.needsFramebuffer&&er(e,u,r.framebuffer),ei(e,u,r.state,s),r.profile&&s(r.profile)&&eY(e,u,r,!1,!0),n)r.useVAO?r.drawVAO?s(r.drawVAO)?u(e.shared.vao,".setVAO(",r.drawVAO.append(e,u),");"):o(e.shared.vao,".setVAO(",r.drawVAO.append(e,o),");"):o(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(o(e.shared.vao,".setVAO(null);"),eX(e,o,r,n.attributes,c),eX(e,u,r,n.attributes,s)),e0(e,o,r,n.uniforms,c,!1),e0(e,u,r,n.uniforms,s,!0),ta(e,o,u,r);else{var l=e.global.def("{}"),d=r.shader.progVar.append(e,u),p=u.def(d,".id"),h=u.def(l,"[",p,"]");u(e.shared.gl,".useProgram(",d,".program);","if(!",h,"){",h,"=",l,"[",p,"]=",e.link(function(t){return tf(tu,e,r,t,2)}),"(",d,");}",h,".call(this,a0[",a,"],",a,");")}}function tc(e,t,n){var i=t.static[n];if(i&&function(e){if(!("object"!=typeof e||F(e))){for(var t=Object.keys(e),r=0;r<t.length;++r)if(a(e[t[r]]))return!0;return!1}}(i)){var o=e.global,u=Object.keys(i),s=!1,c=!1,l=!1,d=e.global.def("{}");u.forEach(function(t){var r=i[t];if(a(r)){"function"==typeof r&&(r=i[t]=f(r));var n=tn(r,null);s=s||n.thisDep,l=l||n.propDep,c=c||n.contextDep}else{switch(o(d,".",t,"="),typeof r){case"number":o(r);break;case"string":o('"',r,'"');break;case"object":Array.isArray(r)&&o("[",r.join(),"]");break;default:o(e.link(r))}o(";")}}),t.dynamic[n]=new r(4,{thisDep:s,contextDep:c,propDep:l,ref:d,append:function(e,t){u.forEach(function(r){var n=i[r];if(a(n)){var f=e.invoke(t,n);t(d,".",r,"=",f,";")}})}}),delete t.static[n]}}return{next:H,current:N,procs:(O=(A=ee()).proc("poll"),E=A.proc("refresh"),O(_=A.block()),E(_),D=(T=A.shared).gl,S=T.next,_(j=T.current,".dirty=false;"),er(A,O),er(A,E,null,!0),M&&(w=A.link(M)),i.oes_vertex_array_object&&E(A.link(i.oes_vertex_array_object),".bindVertexArrayOES(null);"),V=E.def(T.attributes),B=E.def(0),(z=A.cond(B,".buffer")).then(D,".enableVertexAttribArray(i);",D,".bindBuffer(",34962,",",B,".buffer.buffer);",D,".vertexAttribPointer(i,",B,".size,",B,".type,",B,".normalized,",B,".stride,",B,".offset);").else(D,".disableVertexAttribArray(i);",D,".vertexAttrib4f(i,",B,".x,",B,".y,",B,".z,",B,".w);",B,".buffer=null;"),E("for(var i=0;i<",I=A.link(o.maxAttributes,{stable:!0}),";++i){",B,"=",V,"[i];",z,"}"),M&&E("for(var i=0;i<",I,";++i){",w,".vertexAttribDivisorANGLE(i,",V,"[i].divisor);","}"),E(A.shared.vao,".currentVAO=null;",A.shared.vao,".setVAO(",A.shared.vao,".targetVAO);"),Object.keys(Q).forEach(function(e){var t=Q[e],r=_.def(S,".",e),n=A.block();n("if(",r,"){",D,".enable(",t,")}else{",D,".disable(",t,")}",j,".",e,"=",r,";"),E(n),O("if(",r,"!==",j,".",e,"){",n,"}")}),Object.keys(q).forEach(function(e){var t,r,n=q[e],i=N[e],a=A.block();if(a(D,".",n,"("),F(i)){var f=i.length;t=A.global.def(S,".",e),r=A.global.def(j,".",e),a(l(f,function(e){return t+"["+e+"]"}),");",l(f,function(e){return r+"["+e+"]="+t+"["+e+"];"}).join("")),O("if(",l(f,function(e){return t+"["+e+"]!=="+r+"["+e+"]"}).join("||"),"){",a,"}")}else t=_.def(S,".",e),r=_.def(j,".",e),a(t,");",j,".",e,"=",t,";"),O("if(",t,"!==",r,"){",a,"}");E(a)}),A.compile()),compile:function(t,r,a,f,o){var c=ee();c.stats=c.link(o),Object.keys(r.static).forEach(function(e){tc(c,r,e)}),e6.forEach(function(e){tc(c,t,e)});var p=function(e,t,r,a,f){e.static,e.dynamic;var o,c,p,b,v,g,y,x,w,A,O,E,_=function(e,t){var r=e.static;if("string"==typeof r[eN]&&"string"==typeof r[eU]){if(Object.keys(t.dynamic).length>0)return null;var n=t.static,i=Object.keys(n);if(i.length>0&&"number"==typeof n[i[0]]){for(var a=[],f=0;f<i.length;++f)a.push([0|n[i[f]],i[f]]);return a}}return null}(e,t),T=function(e,t){var r=e.static,n=e.dynamic;if(eR in r){var i=r[eR];return i?(i=d.getFramebuffer(i),tr(function(e,t){var r=e.link(i),n=e.shared;t.set(n.framebuffer,".next",r);var a=n.context;return t.set(a,"."+eJ,r+".width"),t.set(a,"."+eK,r+".height"),r})):tr(function(e,t){var r=e.shared;t.set(r.framebuffer,".next","null");var n=r.context;return t.set(n,"."+eJ,n+"."+e1),t.set(n,"."+eK,n+"."+e3),"null"})}if(!(eR in n))return null;var a=n[eR];return tn(a,function(e,t){var r=e.invoke(t,a),n=e.shared,i=n.framebuffer,f=t.def(i,".getFramebuffer(",r,")");t.set(i,".next",f);var o=n.context;return t.set(o,"."+eJ,f+"?"+f+".width:"+o+"."+e1),t.set(o,"."+eK,f+"?"+f+".height:"+o+"."+e3),f})}(e,0),D=function(e,t,r){var n=e.static,i=e.dynamic;function a(e){if(e in n){var r,a,f=n[e],o=!0,u=0|f.x,s=0|f.y;return"width"in f?r=0|f.width:o=!1,"height"in f?a=0|f.height:o=!1,new te(!o&&t&&t.thisDep,!o&&t&&t.contextDep,!o&&t&&t.propDep,function(e,t){var n=e.shared.context,i=r;"width"in f||(i=t.def(n,".",eJ,"-",u));var o=a;return"height"in f||(o=t.def(n,".",eK,"-",s)),[u,s,i,o]})}if(e in i){var c=i[e],l=tn(c,function(e,t){var r=e.invoke(t,c),n=e.shared.context,i=t.def(r,".x|0"),a=t.def(r,".y|0"),f=t.def('"width" in ',r,"?",r,".width|0:","(",n,".",eJ,"-",i,")"),o=t.def('"height" in ',r,"?",r,".height|0:","(",n,".",eK,"-",a,")");return[i,a,f,o]});return t&&(l.thisDep=l.thisDep||t.thisDep,l.contextDep=l.contextDep||t.contextDep,l.propDep=l.propDep||t.propDep),l}return t?new te(t.thisDep,t.contextDep,t.propDep,function(e,t){var r=e.shared.context;return[0,0,t.def(r,".",eJ),t.def(r,".",eK)]}):null}var f=a(eL);if(f){var o=f;f=new te(f.thisDep,f.contextDep,f.propDep,function(e,t){var r=o.append(e,t),n=e.shared.context;return t.set(n,"."+eZ,r[2]),t.set(n,"."+e$,r[3]),r})}return{viewport:f,scissor_box:a(eP)}}(e,T,0),S=function(e,t){var r=e.static,n=e.dynamic,i={},a=!1,f=function(){if("vao"in r){var e=r.vao;return null!==e&&null===h.getVAO(e)&&(e=h.createVAO(e)),a=!0,i.vao=e,tr(function(t){var r=h.getVAO(e);return r?t.link(r):"null"})}if("vao"in n){a=!0;var t=n.vao;return tn(t,function(e,r){var n=e.invoke(r,t);return r.def(e.shared.vao+".getVAO("+n+")")})}return null}(),o=!1,u=function(){if(eH in r){var e=r[eH];if(i.elements=e,e8(e)){var t=i.elements=s.create(e,!0);e=s.getElements(t),o=!0}else e&&(e=s.getElements(e),o=!0);var u=tr(function(t,r){if(e){var n=t.link(e);return t.ELEMENTS=n,n}return t.ELEMENTS=null,null});return u.value=e,u}if(eH in n){o=!0;var c=n[eH];return tn(c,function(e,t){var r=e.shared,n=r.isBufferArgs,i=r.elements,a=e.invoke(t,c),f=t.def("null"),o=t.def(n,"(",a,")"),u=e.cond(o).then(f,"=",i,".createStream(",a,");").else(f,"=",i,".getElements(",a,");");return t.entry(u),t.exit(e.cond(o).then(i,".destroyStream(",f,");")),e.ELEMENTS=f,f})}return a?new te(f.thisDep,f.contextDep,f.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.elements+".getElements("+e.shared.vao+".currentVAO.elements):null")}):null}();function c(e,t){if(e in r){var u=0|r[e];return t?i.offset=u:i.instances=u,tr(function(e,r){return t&&(e.OFFSET=u),u})}if(e in n){var s=n[e];return tn(s,function(e,r){var n=e.invoke(r,s);return t&&(e.OFFSET=n),n})}if(t){if(o)return tr(function(e,t){return e.OFFSET=0,0});else if(a)return new te(f.thisDep,f.contextDep,f.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.offset:0")})}else if(a)return new te(f.thisDep,f.contextDep,f.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.instances:-1")});return null}var l=c(eq,!0),d=function(){if(eW in r){var e=r[eW];return i.primitive=e,tr(function(t,r){return C[e]})}if(eW in n){var t=n[eW];return tn(t,function(e,r){var n=e.constants.primTypes,i=e.invoke(r,t);return r.def(n,"[",i,"]")})}if(o)if(!tt(u))return new te(u.thisDep,u.contextDep,u.propDep,function(e,t){var r=e.ELEMENTS;return t.def(r,"?",r,".primType:",4)});else if(u.value)return tr(function(e,t){return t.def(e.ELEMENTS,".primType")});else return tr(function(){return 4});return a?new te(f.thisDep,f.contextDep,f.propDep,function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.primitive:4")}):null}(),p=function(){if(eQ in r){var e=0|r[eQ];return i.count=e,tr(function(){return e})}if(eQ in n){var t=n[eQ];return tn(t,function(e,r){return e.invoke(r,t)})}if(o)if(!tt(u))return new te(u.thisDep||l.thisDep,u.contextDep||l.contextDep,u.propDep||l.propDep,function(e,t){var r=e.ELEMENTS;return e.OFFSET?t.def(r,"?",r,".vertCount-",e.OFFSET,":-1"):t.def(r,"?",r,".vertCount:-1")});else if(!u)return tr(function(){return -1});else if(l)return new te(l.thisDep,l.contextDep,l.propDep,function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)});else return tr(function(e,t){return t.def(e.ELEMENTS,".vertCount")});return a?new te(f.thisDep,f.contextDep,f.propDep,function(e,t){return t.def(e.shared.vao,".currentVAO?",e.shared.vao,".currentVAO.count:-1")}):null}();return{elements:u,primitive:d,count:p,instances:c(eG,!1),offset:l,vao:f,vaoActive:a,elementsActive:o,static:i}}(e,0),j=(o=e.static,c=e.dynamic,p={},W.forEach(function(e){var t=G(e);function r(r,n){if(e in o){var i=r(o[e]);p[t]=tr(function(){return i})}else if(e in c){var a=c[e];p[t]=tn(a,function(e,t){return n(e,t,e.invoke(t,a))})}}switch(e){case eA:case ep:case ed:case ej:case ev:case eI:case e_:case eD:case eC:case ex:return r(function(e){return e},function(e,t,r){return r});case eg:return r(function(e){return e2[e]},function(e,t,r){var n=e.constants.compareFuncs;return t.def(n,"[",r,"]")});case ey:return r(function(e){return e},function(e,t,r){return[t.def("+",r,"[0]"),t.def("+",r,"[1]")]});case eb:return r(function(e){var t="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,n="dstRGB"in e?e.dstRGB:e.dst,i="dstAlpha"in e?e.dstAlpha:e.dst;return[e5[t],e5[n],e5[r],e5[i]]},function(e,t,r){var n=e.constants.blendFuncs;function i(e,n){return t.def('"',e,n,'" in ',r,"?",r,".",e,n,":",r,".",e)}var a=i("src","RGB"),f=i("dst","RGB"),o=t.def(n,"[",a,"]"),u=t.def(n,"[",i("src","Alpha"),"]");return[o,t.def(n,"[",f,"]"),u,t.def(n,"[",i("dst","Alpha"),"]")]});case em:return r(function(e){return"string"==typeof e?[L[e],L[e]]:"object"==typeof e?[L[e.rgb],L[e.alpha]]:void 0},function(e,t,r){var n=e.constants.blendEquations,i=t.def(),a=t.def(),f=e.cond("typeof ",r,'==="string"');return f.then(i,"=",a,"=",n,"[",r,"];"),f.else(i,"=",n,"[",r,".rgb];",a,"=",n,"[",r,".alpha];"),t(f),[i,a]});case eh:return r(function(e){return l(4,function(t){return+e[t]})},function(e,t,r){return l(4,function(e){return t.def("+",r,"[",e,"]")})});case eV:return r(function(e){return 0|e},function(e,t,r){return t.def(r,"|0")});case eF:return r(function(e){var t=e.cmp||"keep",r=e.ref||0,n="mask"in e?e.mask:-1;return[e2[t],r,n]},function(e,t,r){var n=e.constants.compareFuncs;return[t.def('"cmp" in ',r,"?",n,"[",r,".cmp]",":",7680),t.def(r,".ref|0"),t.def('"mask" in ',r,"?",r,".mask|0:-1")]});case eB:case ez:return r(function(t){var r=t.fail||"keep",n=t.zfail||"keep",i=t.zpass||"keep";return[e===ez?1029:1028,e4[r],e4[n],e4[i]]},function(t,r,n){var i=t.constants.stencilOps;function a(e){return r.def('"',e,'" in ',n,"?",i,"[",n,".",e,"]:",7680)}return[e===ez?1029:1028,a("fail"),a("zfail"),a("zpass")]});case eT:return r(function(e){return[0|e.factor,0|e.units]},function(e,t,r){return[t.def(r,".factor|0"),t.def(r,".units|0")]});case ek:return r(function(e){var t=0;return"front"===e?t=1028:"back"===e&&(t=1029),t},function(e,t,r){return t.def(r,'==="front"?',1028,":",1029)});case eE:return r(function(e){return e},function(e,t,r){return r});case eO:return r(function(e){return e7[e]},function(e,t,r){return t.def(r+'==="cw"?2304:2305')});case ew:return r(function(e){return e.map(function(e){return!!e})},function(e,t,r){return l(4,function(e){return"!!"+r+"["+e+"]"})});case eS:return r(function(e){return["value"in e?e.value:1,!!e.invert]},function(e,t,r){return[t.def('"value" in ',r,"?+",r,".value:1"),t.def("!!",r,".invert")]})}}),p),V=function(e,t,r){var i,a=e.static,f=e.dynamic;function o(e){if(e in a){var t=n.id(a[e]),r=tr(function(){return t});return r.id=t,r}if(e in f){var i=f[e];return tn(i,function(e,t){var r=e.invoke(t,i);return t.def(e.shared.strings,".id(",r,")")})}return null}var u=o(eN),s=o(eU),c=null;return tt(u)&&tt(s)?(c=m.program(s.id,u.id,null,r),i=tr(function(e,t){return e.link(c)})):i=new te(u&&u.thisDep||s&&s.thisDep,u&&u.contextDep||s&&s.contextDep,u&&u.propDep||s&&s.propDep,function(e,t){var r,n,i=e.shared.shader;r=u?u.append(e,t):t.def(i,".",eN),n=s?s.append(e,t):t.def(i,".",eU);var a=i+".program("+n+","+r;return t.def(a+")")}),{frag:u,vert:s,progVar:i,program:c}}(e,0,_);function B(e){var t=D[e];t&&(j[e]=t)}B(eL),B(G(eP));var z=Object.keys(j).length>0,I={framebuffer:T,draw:S,shader:V,state:j,dirty:z,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(I.profile=function(e){var t,r=e.static,n=e.dynamic;if(eM in r){var i=!!r[eM];(t=tr(function(e,t){return i})).enable=i}else if(eM in n){var a=n[eM];t=tn(a,function(e,t){return e.invoke(t,a)})}return t}(e,f),b=r.static,v=r.dynamic,g={},Object.keys(b).forEach(function(e){var t,r=b[e];if("number"==typeof r||"boolean"==typeof r)t=tr(function(){return r});else if("function"==typeof r){var n=r._reglType;"texture2d"===n||"textureCube"===n?t=tr(function(e){return e.link(r)}):("framebuffer"===n||"framebufferCube"===n)&&(t=tr(function(e){return e.link(r.color[0])}))}else F(r)&&(t=tr(function(e){return e.global.def("[",l(r.length,function(e){return r[e]}),"]")}));t.value=r,g[e]=t}),Object.keys(v).forEach(function(e){var t=v[e];g[e]=tn(t,function(e,r){return e.invoke(r,t)})}),I.uniforms=g,I.drawVAO=I.scopeVAO=S.vao,!I.drawVAO&&V.program&&!_&&i.angle_instanced_arrays&&S.static.elements){var M=!0,R=V.program.attributes.map(function(e){var r=t.static[e];return M=M&&!!r,r});if(M&&R.length>0){var U=h.getVAO(h.createVAO({attributes:R,elements:S.static.elements}));I.drawVAO=new te(null,null,null,function(e,t){return e.link(U)}),I.useVAO=!0}}return _?I.useVAO=!0:(y=t.static,x=t.dynamic,w={},Object.keys(y).forEach(function(e){var t=y[e],r=n.id(e),i=new P;if(e8(t))i.state=1,i.buffer=u.getBuffer(u.create(t,34962,!1,!0)),i.type=0;else{var a=u.getBuffer(t);if(a)i.state=1,i.buffer=a,i.type=0;else if("constant"in t){var f=t.constant;i.buffer="null",i.state=2,"number"==typeof f?i.x=f:el.forEach(function(e,t){t<f.length&&(i[e]=f[t])})}else{a=e8(t.buffer)?u.getBuffer(u.create(t.buffer,34962,!1,!0)):u.getBuffer(t.buffer);var o=0|t.offset,s=0|t.stride,c=0|t.size,l=!!t.normalized,d=0;"type"in t&&(d=k[t.type]);var p=0|t.divisor;i.buffer=a,i.state=1,i.size=c,i.normalized=l,i.type=d||a.dtype,i.offset=o,i.stride=s,i.divisor=p}}w[e]=tr(function(e,t){var n=e.attribCache;if(r in n)return n[r];var a={isStream:!1};return Object.keys(i).forEach(function(e){a[e]=i[e]}),i.buffer&&(a.buffer=e.link(i.buffer),a.type=a.type||a.buffer+".dtype"),n[r]=a,a})}),Object.keys(x).forEach(function(e){var t=x[e];w[e]=tn(t,function(e,r){var n=e.invoke(r,t),i=e.shared,a=e.constants,f=i.isBufferArgs,o=i.buffer,u={isStream:r.def(!1)},s=new P;s.state=1,Object.keys(s).forEach(function(e){u[e]=r.def(""+s[e])});var c=u.buffer,l=u.type;function d(e){r(u[e],"=",n,".",e,"|0;")}return r("if(",f,"(",n,")){",u.isStream,"=true;",c,"=",o,".createStream(",34962,",",n,");",l,"=",c,".dtype;","}else{",c,"=",o,".getBuffer(",n,");","if(",c,"){",l,"=",c,".dtype;",'}else if("constant" in ',n,"){",u.state,"=",2,";","if(typeof "+n+'.constant === "number"){',u[el[0]],"=",n,".constant;",el.slice(1).map(function(e){return u[e]}).join("="),"=0;","}else{",el.map(function(e,t){return u[e]+"="+n+".constant.length>"+t+"?"+n+".constant["+t+"]:0;"}).join(""),"}}else{","if(",f,"(",n,".buffer)){",c,"=",o,".createStream(",34962,",",n,".buffer);","}else{",c,"=",o,".getBuffer(",n,".buffer);","}",l,'="type" in ',n,"?",a.glTypes,"[",n,".type]:",c,".dtype;",u.normalized,"=!!",n,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),r("}}"),r.exit("if(",u.isStream,"){",o,".destroyStream(",c,");","}"),u})}),I.attributes=w),A=a.static,O=a.dynamic,E={},Object.keys(A).forEach(function(e){var t=A[e];E[e]=tr(function(e,r){return"number"==typeof t||"boolean"==typeof t?""+t:e.link(t)})}),Object.keys(O).forEach(function(e){var t=O[e];E[e]=tn(t,function(e,r){return e.invoke(r,t)})}),I.context=E,I}(t,r,a,f,c);return p.shader.program&&(p.shader.program.attributes.sort(function(e,t){return e.name<t.name?-1:1}),p.shader.program.uniforms.sort(function(e,t){return e.name<t.name?-1:1})),!function(e,t){var r=e.proc("draw",1);ea(e,r),et(e,r,t.context),er(e,r,t.framebuffer),en(e,r,t),ei(e,r,t.state),eY(e,r,t,!1,!0);var n=t.shader.progVar.append(e,r);if(r(e.shared.gl,".useProgram(",n,".program);"),t.shader.program)to(e,r,t,t.shader.program);else{r(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),a=r.def(n,".id"),f=r.def(i,"[",a,"]");r(e.cond(f).then(f,".call(this,a0);").else(f,"=",i,"[",a,"]=",e.link(function(r){return tf(to,e,t,r,1)}),"(",n,");",f,".call(this,a0);"))}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;"),e.shared.vao&&r(e.shared.vao,".setVAO(null);")}(c,p),!function(e,t){var r=e.proc("scope",3);e.batchId="a2";var i=e.shared,a=i.current;if(et(e,r,t.context),t.framebuffer&&t.framebuffer.append(e,r),e9(Object.keys(t.state)).forEach(function(n){var a=t.state[n],f=a.append(e,r);F(f)?f.forEach(function(t,i){J(t)?r.set(e.next[n],"["+i+"]",t):r.set(e.next[n],"["+i+"]",e.link(t,{stable:!0}))}):tt(a)?r.set(i.next,"."+n,e.link(f,{stable:!0})):r.set(i.next,"."+n,f)}),eY(e,r,t,!0,!0),[eH,eq,eQ,eG,eW].forEach(function(n){var a=t.draw[n];if(a){var f=a.append(e,r);J(f)?r.set(i.draw,"."+n,f):r.set(i.draw,"."+n,e.link(f),{stable:!0})}}),Object.keys(t.uniforms).forEach(function(a){var f=t.uniforms[a].append(e,r);Array.isArray(f)&&(f="["+f.map(function(t){return J(t)?t:e.link(t,{stable:!0})})+"]"),r.set(i.uniforms,"["+e.link(n.id(a),{stable:!0})+"]",f)}),Object.keys(t.attributes).forEach(function(n){var i=t.attributes[n].append(e,r),a=e.scopeAttrib(n);Object.keys(new P).forEach(function(e){r.set(a,"."+e,i[e])})}),t.scopeVAO){var f=t.scopeVAO.append(e,r);J(f)?r.set(i.vao,".targetVAO",f):r.set(i.vao,".targetVAO",e.link(f,{stable:!0}))}function o(n){var a=t.shader[n];if(a){var f=a.append(e,r);J(f)?r.set(i.shader,"."+n,f):r.set(i.shader,"."+n,e.link(f,{stable:!0}))}}o(eU),o(eN),Object.keys(t.state).length>0&&(r(a,".dirty=true;"),r.exit(a,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}(c,p),!function(e,t){var r=e.proc("batch",2);e.batchId="0",ea(e,r);var n=!1,i=!0;Object.keys(t.context).forEach(function(e){n=n||t.context[e].propDep}),n||(et(e,r,t.context),i=!1);var a=t.framebuffer,f=!1;function o(e){return e.contextDep&&n||e.propDep}a?(a.propDep?n=f=!0:a.contextDep&&n&&(f=!0),f||er(e,r,a)):er(e,r,null),t.state.viewport&&t.state.viewport.propDep&&(n=!0),en(e,r,t),ei(e,r,t.state,function(e){return!o(e)}),t.profile&&o(t.profile)||eY(e,r,t,!1,"a1"),t.contextDep=n,t.needsContext=i,t.needsFramebuffer=f;var u=t.shader.progVar;if(u.contextDep&&n||u.propDep)ts(e,r,t,null);else{var s=u.append(e,r);if(r(e.shared.gl,".useProgram(",s,".program);"),t.shader.program)ts(e,r,t,t.shader.program);else{r(e.shared.vao,".setVAO(null);");var c=e.global.def("{}"),l=r.def(s,".id"),d=r.def(c,"[",l,"]");r(e.cond(d).then(d,".call(this,a0,a1);").else(d,"=",c,"[",l,"]=",e.link(function(r){return tf(ts,e,t,r,2)}),"(",s,");",d,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;"),e.shared.vao&&r(e.shared.vao,".setVAO(null);")}(c,p),e(c.compile(),{destroy:function(){p.shader.program.destroy()}})}}}(w,P,q,tl,td,tp,0,tg,{},th,tm,tc,ts,et,Q,p),tx=function(e,t,r,n,i,a,f){function o(i){var a=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type,f=0,o=0,u=n.framebufferWidth,s=n.framebufferHeight,c=null;b(i)?c=i:i&&(f=0|i.x,o=0|i.y,u=0|(i.width||n.framebufferWidth-f),s=0|(i.height||n.framebufferHeight-o),c=i.data||null),r();var l=u*s*4;return c||(5121===a?c=new Uint8Array(l):5126===a&&(c=c||new Float32Array(l))),e.pixelStorei(3333,4),e.readPixels(f,o,u,s,6408,a,c),c}return function(e){var r;return e&&"framebuffer"in e?(t.setFBO({framebuffer:e.framebuffer},function(){r=o(e)}),r):o(e)}}(w,tg,ty.procs.poll,ts,0,0,0),tw=ty.next,tA=w.canvas,tk=[],tO=[],tE=[],t_=[p.onDestroy],tT=null;function tD(){if(0===tk.length){et&&et.update(),tT=null;return}tT=o.next(tD),tL();for(var e=tk.length-1;e>=0;--e){var t=tk[e];t&&t(ts,null,0)}w.flush(),et&&et.update()}function tC(){!tT&&tk.length>0&&(tT=o.next(tD))}function tS(){tT&&(o.cancel(tD),tT=null)}function tj(e){e.preventDefault(),tS(),tO.forEach(function(e){e()})}function tV(e){w.getError(),j.restore(),tm.restore(),td.restore(),tb.restore(),tv.restore(),tg.restore(),th.restore(),et&&et.restore(),ty.procs.refresh(),tC(),tE.forEach(function(e){e()})}function tF(t){function r(e,t){var r={},n={};return Object.keys(e).forEach(function(i){var o=e[i];if(a(o)){n[i]=f(o,i);return}if(t&&Array.isArray(o)){for(var u=0;u<o.length;++u)if(a(o[u])){n[i]=f(o,i);return}}r[i]=o}),{dynamic:n,static:r}}var n=r(t.context||{},!0),i=r(t.uniforms||{},!0),o=r(t.attributes||{},!1),u=r(function(t){var r=e({},t);function n(e){if(e in r){var t=r[e];delete r[e],Object.keys(t).forEach(function(n){r[e+"."+n]=t[n]})}}return delete r.uniforms,delete r.attributes,delete r.context,delete r.vao,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),n("blend"),n("depth"),n("cull"),n("stencil"),n("polygonOffset"),n("scissor"),n("sample"),"vao"in t&&(r.vao=t.vao),r}(t),!1),s={gpuTime:0,cpuTime:0,count:0},c=ty.compile(u,o,i,n,s),l=c.draw,d=c.batch,p=c.scope,h=[];return e(function(e,t){var r;if("function"==typeof e)return p.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(r=0;r<e;++r)p.call(this,null,t,r);else if(!Array.isArray(e))return p.call(this,e,t,0);else for(r=0;r<e.length;++r)p.call(this,e[r],t,r);else if("number"==typeof e){if(e>0)return d.call(this,function(e){for(;h.length<e;)h.push(null);return h}(0|e),0|e)}else if(!Array.isArray(e))return l.call(this,e);else if(e.length)return d.call(this,e,e.length)},{stats:s,destroy:function(){c.destroy()}})}tA&&(tA.addEventListener(tf,tj,!1),tA.addEventListener(to,tV,!1));var tB=tg.setFBO=tF({framebuffer:i.call(null,1,"framebuffer")});function tz(e,t){var r=0;ty.procs.poll();var n=t.color;n&&(w.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=16384),"depth"in t&&(w.clearDepth(+t.depth),r|=256),"stencil"in t&&(w.clearStencil(0|t.stencil),r|=1024),w.clear(r)}function tI(e){return tk.push(e),tC(),{cancel:function(){var t=tu(tk,e);tk[t]=function e(){var t=tu(tk,e);tk[t]=tk[tk.length-1],tk.length-=1,tk.length<=0&&tS()}}}}function tP(){var e=tw.viewport,t=tw.scissor_box;e[0]=e[1]=t[0]=t[1]=0,ts.viewportWidth=ts.framebufferWidth=ts.drawingBufferWidth=e[2]=t[2]=w.drawingBufferWidth,ts.viewportHeight=ts.framebufferHeight=ts.drawingBufferHeight=e[3]=t[3]=w.drawingBufferHeight}function tL(){ts.tick+=1,ts.time=tR(),tP(),ty.procs.poll()}function tM(){tb.refresh(),tP(),ty.procs.refresh(),et&&et.update()}function tR(){return(u()-eY)/1e3}tM();var tU=e(tF,{clear:function(t){if("framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var r=0;r<6;++r)tB(e({framebuffer:t.framebuffer.faces[r]},t),tz);else tB(t,tz);else tz(null,t)},prop:i.bind(null,1),context:i.bind(null,2),this:i.bind(null,3),draw:tF({}),buffer:function(e){return td.create(e,34962,!1,!1)},elements:function(e){return tp.create(e,!1)},texture:tb.create2D,cube:tb.createCube,renderbuffer:tv.create,framebuffer:tg.create,framebufferCube:tg.createCube,vao:th.createVAO,attributes:A,frame:tI,on:function(e,t){var r;switch(e){case"frame":return tI(t);case"lost":r=tO;break;case"restore":r=tE;break;case"destroy":r=t_}return r.push(t),{cancel:function(){for(var e=0;e<r.length;++e)if(r[e]===t){r[e]=r[r.length-1],r.pop();return}}}},limits:tl,hasExtension:function(e){return tl.extensions.indexOf(e.toLowerCase())>=0},read:tx,destroy:function(){tk.length=0,tS(),tA&&(tA.removeEventListener(tf,tj),tA.removeEventListener(to,tV)),tm.clear(),tg.clear(),tv.clear(),th.clear(),tb.clear(),tp.clear(),td.clear(),et&&et.clear(),t_.forEach(function(e){e()})},_gl:w,_refresh:tM,poll:function(){tL(),et&&et.update()},now:tR,stats:W,getCachedCode:function(){return Q},preloadCachedCode:function(e){Object.entries(e).forEach(function(e){Q[e[0]]=e[1]})}});return p.onDone(null,tU),tU}}()}}]);